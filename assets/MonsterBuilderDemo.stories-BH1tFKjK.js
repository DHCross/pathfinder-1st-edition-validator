import{r as d,R as e}from"./iframe-DtiNxws0.js";import{v as ie,a as se}from"./validateEconomy-6D0WuLcc.js";import{g as de,e as ce,v as me}from"./benchmarkUtils-BN8AiauO.js";import{X as ne,S as pe,C as ue}from"./pf1e-data-tables-BqrvN3By.js";import"./preload-helper-PPVm8Dsz.js";const ge=["Monster","NPC","From-Scratch"],fe=({name:l,targetCR:o,creatureType:a,hd:r,hdDie:w,str:A,dex:z,con:Y,int:h,wis:u,cha:k,buildPath:K,onNameChange:M,onTargetCRChange:y,onCreatureTypeChange:E,onHdChange:b,onStrChange:$,onDexChange:H,onConChange:j,onIntChange:W,onWisChange:m,onChaChange:R,onBuildPathChange:G,onLoadPreset:g,size:D,template:T,onTemplateChange:F,onApplyTemplate:f,onSizeChange:P,onHdDieChange:B,hdGuardrail:c})=>{const[L,V]=d.useState(!1),x=typeof c?.estimate=="number"?c.estimate:void 0,N=typeof c?.max=="number"?c.max:void 0,I=typeof c?.hpBenchmark=="number"?c.hpBenchmark:void 0,U=typeof c?.totalHD=="number"?c.totalHD:r,q=typeof c?.canonicalXP=="number"?c.canonicalXP:void 0,v={Medium:{str:10,dex:10,con:10},Large:{str:18,dex:8,con:14},Huge:{str:26,dex:6,con:18},Gargantuan:{str:34,dex:6,con:22},Colossal:{str:42,dex:6,con:26}};return e.createElement("section",{"aria-labelledby":"foundation-card-title",style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:16,padding:20,boxShadow:"inset 0 1px 0 #fff, 0 10px 30px #0f172a0d"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:12}},e.createElement("div",null,e.createElement("h2",{id:"foundation-card-title",style:{margin:"0 0 4px"}},"New Creature â€” Foundation"),e.createElement("p",{style:{margin:0,color:"#475569"}},"Choose your build path, set CR, HD, ability scores, and give the creature a name.")),e.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},e.createElement("span",{style:{fontSize:12,fontWeight:700,color:"#312e81",textTransform:"uppercase",letterSpacing:.6}},"Start here"),g&&e.createElement("div",{style:{display:"flex",gap:8}},e.createElement("button",{onClick:()=>g("NastyBeast"),style:{fontSize:12,fontWeight:600,padding:"6px 12px",borderRadius:8,border:"1px solid #9f7aea",background:"#faf5ff",color:"#6b21a8",cursor:"pointer"}},"Load: NastyBeast"),e.createElement("button",{onClick:()=>g("LowestScores"),style:{fontSize:12,fontWeight:600,padding:"6px 12px",borderRadius:8,border:"1px solid #10b981",background:"#ecfdf5",color:"#065f46",cursor:"pointer"}},"Load: Lowest Scores")))),e.createElement("div",{style:{display:"grid",gap:18}},e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("div",{style:{fontWeight:700}},"Creature Type"),e.createElement("div",{style:{background:"#f0fdf4",border:"1px solid #86efac",borderRadius:12,padding:12,marginBottom:6}},e.createElement("div",{style:{fontSize:13,color:"#166534",fontWeight:600,marginBottom:4}},"ðŸ”§ Foundational Rules Package"),e.createElement("div",{style:{fontSize:12,color:"#16a34a",lineHeight:1.5}},"Your creature type dictates HD size, BAB progression, save bonuses, skill economy, and inherent traits. This choice is the structural skeleton of your monster.")),e.createElement("select",{value:a,onChange:i=>E(i.target.value),style:{border:"1px solid #cbd5f5",borderRadius:12,padding:"12px 14px",fontSize:15,width:"100%",boxShadow:"0 2px 8px #1e3a8a18"}},e.createElement("option",{value:"Humanoid"},"Humanoid (d8, Medium BAB, Int-based skills)"),e.createElement("option",{value:"Animal"},"Animal (d8, Medium BAB, low-light vision, scent)"),e.createElement("option",{value:"Construct"},"Construct (d10, Fast BAB, immune to mind-affecting)"),e.createElement("option",{value:"Dragon"},"Dragon (d12, Fast BAB, all good saves, high skills)"),e.createElement("option",{value:"Fey"},"Fey (d6, Slow BAB, high skills, forest-aligned)"),e.createElement("option",{value:"Magical Beast"},"Magical Beast (d10, Fast BAB, darkvision)"),e.createElement("option",{value:"Monstrous Humanoid"},"Monstrous Humanoid (d10, Fast BAB, darkvision)"),e.createElement("option",{value:"Aberration"},"Aberration (d8, Medium BAB, will-focused, bizarre)"),e.createElement("option",{value:"Outsider"},"Outsider (d10, Fast BAB, any saves, planar origin)"),e.createElement("option",{value:"Undead"},"Undead (d8, Medium BAB, will-focused, immune to critical hits)"),e.createElement("option",{value:"Ooze"},"Ooze (d8, Medium BAB, mindless, immune to precision damage)"),e.createElement("option",{value:"Plant"},"Plant (d8, Medium BAB, fort-focused, immune to mental effects)"),e.createElement("option",{value:"Vermin"},"Vermin (d8, Medium BAB, mindless, immune to mental effects)")),e.createElement("div",{style:{display:"flex",gap:10,marginTop:8,alignItems:"center"}},e.createElement("label",{style:{display:"flex",gap:8,alignItems:"center",fontWeight:600}},"Size",e.createElement("select",{value:D,onChange:i=>{const t=i.target.value;console.debug("[FoundationBuilder] size change ->",{newSize:t,autoAdjustPhysical:L}),P&&P(t),L&&v[t]&&(console.debug("[FoundationBuilder] applying size defaults",v[t]),$(v[t].str),H(v[t].dex),j(v[t].con))},style:{padding:"8px 10px",borderRadius:8,border:"1px solid #e5e7eb"}},e.createElement("option",{value:"Tiny"},"Tiny"),e.createElement("option",{value:"Small"},"Small"),e.createElement("option",{value:"Medium"},"Medium"),e.createElement("option",{value:"Large"},"Large"),e.createElement("option",{value:"Huge"},"Huge"),e.createElement("option",{value:"Gargantuan"},"Gargantuan"))),e.createElement("label",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12,color:"#475569"}},e.createElement("input",{type:"checkbox",checked:L,onChange:i=>V(i.target.checked)}),"Auto-adjust physical scores to size defaults"),e.createElement("label",{style:{display:"flex",gap:8,alignItems:"center",fontWeight:600}},"Template",e.createElement("select",{value:T||"",onChange:i=>F&&F(i.target.value),style:{padding:"8px 10px",borderRadius:8,border:"1px solid #e5e7eb"}},e.createElement("option",{value:""},"None"),e.createElement("option",{value:"Advanced Creature"},"Advanced Creature"),e.createElement("option",{value:"Giant Creature"},"Giant Creature"),e.createElement("option",{value:"Young Creature"},"Young Creature"),e.createElement("option",{value:"Celestial Creature"},"Celestial Creature"),e.createElement("option",{value:"Fiendish Creature"},"Fiendish Creature"),e.createElement("option",{value:"Skeleton"},"Skeleton"),e.createElement("option",{value:"Zombie"},"Zombie"),e.createElement("option",{value:"Half-Dragon"},"Half-Dragon"),e.createElement("option",{value:"Half-Fiend"},"Half-Fiend"),e.createElement("option",{value:"Lich"},"Lich"),e.createElement("option",{value:"Ghost"},"Ghost"))),f&&e.createElement("button",{type:"button",onClick:()=>f(T||"None"),style:{padding:"8px 12px",borderRadius:8,border:"1px solid #9f7aea",background:"#faf5ff",color:"#6b21a8",cursor:"pointer",fontWeight:700}},"Apply Template"))),e.createElement("label",{style:{fontWeight:700,display:"grid",gap:8}},"Creature Name",e.createElement("div",{style:{position:"relative"}},e.createElement("input",{value:l,onChange:i=>M(i.target.value),placeholder:"e.g., Embermaw Basilisk",style:{border:"1px solid #cbd5f5",borderRadius:12,padding:"12px 14px",fontSize:15,width:"100%",maxWidth:640,boxShadow:"0 2px 8px #1e3a8a18"}}),e.createElement("span",{style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",color:"#94a3b8",fontSize:12}},"Required"))),e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("div",{style:{fontWeight:700}},"Build Path"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:10}},ge.map(i=>{const t=K===i,n=i==="Monster"?"Classic foes with bestiary math":i==="NPC"?"Humanoid + gear presets":"Blank canvas for homebrew";return e.createElement("button",{key:i,onClick:()=>G(i),type:"button",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left",borderRadius:14,padding:"12px 14px",border:t?"2px solid #4338ca":"1px solid #cbd5f5",background:t?"#eef2ff":"#fff",color:t?"#1e1b4b":"#0f172a",fontWeight:600,cursor:"pointer",gap:4,boxShadow:t?"0 6px 16px #312e811c":"0 2px 6px #0f172a0d"}},e.createElement("span",null,i),e.createElement("span",{style:{fontSize:13,color:t?"#4c1d95":"#475569",fontWeight:500}},n))}))),e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("div",{style:{fontWeight:700}},"Creature Type Details"),e.createElement("div",{style:{background:"#f5f5ff",border:"1px solid #e0e7ff",borderRadius:10,padding:12,display:"grid",gap:8,fontSize:13,color:"#312e81"}},e.createElement("div",null,e.createElement("strong",null,"HD:")," ",a==="Dragon"?"d12":a==="Fey"?"d6":a==="Construct"||a==="Magical Beast"||a==="Monstrous Humanoid"||a==="Outsider"?"d10":"d8"),e.createElement("div",null,e.createElement("strong",null,"BAB Progression:")," ",a==="Fey"?"Slow (Â½ HD)":a==="Construct"||a==="Dragon"||a==="Magical Beast"||a==="Monstrous Humanoid"||a==="Outsider"?"Fast (Full HD)":"Medium (Â¾ HD)"),e.createElement("div",null,e.createElement("strong",null,"Good Saves:")," ",a==="Dragon"?"Fort, Ref, Will":a==="Humanoid"?"Any one":a==="Animal"?"Fort, Ref":a==="Undead"?"Will":a==="Plant"||a==="Vermin"?"Fort":a==="Aberration"?"Will":a==="Fey"||a==="Monstrous Humanoid"?"Ref, Will":"Varies"),e.createElement("div",null,e.createElement("strong",null,"Skill Ranks/HD:")," ",a==="Dragon"||a==="Outsider"||a==="Fey"?"6 + Int":a==="Aberration"||a==="Undead"||a==="Monstrous Humanoid"?"4 + Int":"2 + Int")),a==="Humanoid"&&e.createElement("div",{style:{fontSize:13,color:"#475569",marginTop:8}},e.createElement("strong",null,"Note:")," Humanoids commonly use class levels rather than Racial HD for progression. Use NPC classes to represent Humanoid threats at low CR (e.g., CR 1/3 Foot Soldier = 1 level fighter)."),e.createElement("div",{style:{fontWeight:700}},"Target CR"),e.createElement("span",{style:{fontSize:13,color:"#475569"}},"CR ",o),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:12}},e.createElement("span",{style:{fontSize:12,color:"#94a3b8"}},"1"),e.createElement("input",{type:"range",min:1,max:25,value:o,onChange:i=>y(parseInt(i.target.value,10)),style:{flexGrow:1}}),e.createElement("span",{style:{fontSize:12,color:"#94a3b8"}},"25")),e.createElement("div",{style:{fontSize:13,color:"#475569"}},"Calibrates HP, saves, attack bonuses, and loot tiers. Adjust to match your tableâ€™s target difficulty."),c&&e.createElement("div",{style:{border:"1px solid #c7d2fe",background:"#eef2ff",borderRadius:12,padding:12,display:"grid",gap:8}},e.createElement("div",{style:{fontWeight:700,color:"#312e81"}},"HD / CR Guardrail"),e.createElement("div",{style:{fontSize:13,color:"#312e81"}},"CR ",o," benchmarks ~",x??"â€”"," HD (",I??"â€”"," hp). Current build uses ",U," HD."),N!==void 0&&U>N&&e.createElement("div",{style:{color:"#b45309",fontSize:13}},"Warning: exceeding ",N," HD will trigger Rules Lawyer critical errors."),e.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap"}},typeof x=="number"&&e.createElement("button",{type:"button",onClick:()=>b(Math.max(1,x)),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #a5b4fc",background:"#fff",color:"#4338ca",fontWeight:600,cursor:"pointer"}},"Set HD to ",x),typeof q=="number"&&e.createElement("span",{style:{padding:"6px 12px",borderRadius:999,background:"#312e81",color:"#fff",fontSize:12,fontWeight:600}},"XP locked: ",q)))),e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("div",{style:{fontWeight:700}},"Hit Dice"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:10,alignItems:"center"}},e.createElement("div",null,e.createElement("input",{type:"number",min:1,max:20,value:r,onChange:i=>b(Number(i.target.value)),style:{border:"1px solid #cbd5f5",borderRadius:12,padding:"12px 14px",fontSize:15,width:"100%",boxShadow:"0 2px 8px #1e3a8a18"}})),e.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},e.createElement("div",{style:{fontSize:13,color:"#475569",fontWeight:600}},w||(a==="Dragon"?"d12":a==="Fey"?"d6":a==="Construct"||a==="Magical Beast"||a==="Monstrous Humanoid"||a==="Outsider"?"d10":"d8")),B&&e.createElement("select",{value:w||"",onChange:i=>B(i.target.value),style:{padding:"6px 8px",borderRadius:8,border:"1px solid #e5e7eb"}},e.createElement("option",{value:""},"(auto)"),e.createElement("option",{value:"d6"},"d6"),e.createElement("option",{value:"d8"},"d8"),e.createElement("option",{value:"d10"},"d10"),e.createElement("option",{value:"d12"},"d12")))),e.createElement("details",{style:{background:"#fff",border:"1px solid #e6edf3",borderRadius:10,padding:12,fontSize:13,color:"#0f172a"}},e.createElement("summary",{style:{fontWeight:700,cursor:"pointer",marginBottom:8}},"Size Dictates Base Physical Scores"),e.createElement("div",{style:{lineHeight:1.5}},e.createElement("p",null,e.createElement("strong",null,"Size is the primary physical adjuster for monsters built using Racial Hit Dice (RHD)."),' The creation process dictates that Step 4 (Size) sets this baseline, and the creatureâ€™s physical ability scores should be "relatively close to the base values presented on Table: Size".'),e.createElement("p",null,"Here is how Size acts as the primary physical adjuster:"),e.createElement("div",{style:{display:"grid",gap:6}},e.createElement("div",{style:{fontWeight:700}},"Size Dictates Base Physical Scores"),e.createElement("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13}},e.createElement("thead",null,e.createElement("tr",{style:{textAlign:"left"}},e.createElement("th",{style:{padding:"4px 6px",fontWeight:700,borderBottom:"1px solid #e2e8f0"}},"Size"),e.createElement("th",{style:{padding:"4px 6px",fontWeight:700,borderBottom:"1px solid #e2e8f0"}},"Minimum CR"),e.createElement("th",{style:{padding:"4px 6px",fontWeight:700,borderBottom:"1px solid #e2e8f0"}},"Base Str"),e.createElement("th",{style:{padding:"4px 6px",fontWeight:700,borderBottom:"1px solid #e2e8f0"}},"Base Dex"),e.createElement("th",{style:{padding:"4px 6px",fontWeight:700,borderBottom:"1px solid #e2e8f0"}},"Base Con"))),e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{style:{padding:"4px 6px"}},"Medium"),e.createElement("td",{style:{padding:"4px 6px"}},"â€”"),e.createElement("td",{style:{padding:"4px 6px"}},"10"),e.createElement("td",{style:{padding:"4px 6px"}},"10"),e.createElement("td",{style:{padding:"4px 6px"}},"10")),e.createElement("tr",null,e.createElement("td",{style:{padding:"4px 6px"}},"Large"),e.createElement("td",{style:{padding:"4px 6px"}},"2"),e.createElement("td",{style:{padding:"4px 6px"}},"18"),e.createElement("td",{style:{padding:"4px 6px"}},"8"),e.createElement("td",{style:{padding:"4px 6px"}},"14")),e.createElement("tr",null,e.createElement("td",{style:{padding:"4px 6px"}},"Huge"),e.createElement("td",{style:{padding:"4px 6px"}},"4"),e.createElement("td",{style:{padding:"4px 6px"}},"26"),e.createElement("td",{style:{padding:"4px 6px"}},"6"),e.createElement("td",{style:{padding:"4px 6px"}},"18")),e.createElement("tr",null,e.createElement("td",{style:{padding:"4px 6px"}},"Gargantuan"),e.createElement("td",{style:{padding:"4px 6px"}},"6"),e.createElement("td",{style:{padding:"4px 6px"}},"34"),e.createElement("td",{style:{padding:"4px 6px"}},"6"),e.createElement("td",{style:{padding:"4px 6px"}},"22")),e.createElement("tr",null,e.createElement("td",{style:{padding:"4px 6px"}},"Colossal"),e.createElement("td",{style:{padding:"4px 6px"}},"8"),e.createElement("td",{style:{padding:"4px 6px"}},"42"),e.createElement("td",{style:{padding:"4px 6px"}},"6"),e.createElement("td",{style:{padding:"4px 6px"}},"26"))))),e.createElement("p",null,"As shown in the guidelines, ",e.createElement("strong",null,"Medium creatures")," serve as the baseline, starting all three physical scores at ",e.createElement("strong",null,"10"),". However, once a creature's size increases to ",e.createElement("strong",null,"Large or greater"),", it gains significant default bonuses to Strength and Constitution, while also incurring penalties to Dexterity, reflecting its bulk."),e.createElement("p",null,"These large default scores guarantee that creatures designed to be large (like the Huge Behir or Large Ogre) naturally meet the durability and damage output requirements for their minimum CR."),e.createElement("div",{style:{fontWeight:700,marginTop:8}},"Physical Scores vs. Mental Scores"),e.createElement("p",null,"The principle of Size adjusting physical scores does not apply to mental scores:"),e.createElement("ul",null,e.createElement("li",null,e.createElement("strong",null,"Physical Scores (STR, DEX, CON):"),` Must remain "relatively close" to the values set by the creature's size, unless the monster has a high average HP for its CR (requiring high CON).`),e.createElement("li",null,e.createElement("strong",null,"Mental Scores (INT, WIS, CHA):")," The baseline for all mental abilities is ",e.createElement("strong",null,"10"),". These scores are largely defined by the creatureâ€™s ",e.createElement("strong",null,"concept"),'â€”for instance, a creature relying on spells or spell-like abilities usually needs one mental ability score, such as Charisma, to "stand out".')),e.createElement("div",{style:{fontWeight:700,marginTop:8}},"Size Adjustments in Practice"),e.createElement("p",null,"The effect of size is profound and immediate, often outweighing other modifiers:"),e.createElement("ul",null,e.createElement("li",null,e.createElement("strong",null,"Ability Score Changes via Spells:")," Many spells and magical effects that change a creature's size apply fixed size bonuses and penalties to physical scores. For instance, the ",e.createElement("em",null,"Giant Form I")," spell grants a ",e.createElement("strong",null,"+6 size bonus to Strength, a +4 size bonus to Constitution, and a â€“2 penalty to Dexterity")," to a creature becoming Large. Similarly, the ",e.createElement("em",null,"Animal Growth")," spell increases a target animal's size by one category, granting a ",e.createElement("strong",null,"+8 size bonus to Strength")," and a ",e.createElement("strong",null,"+4 size bonus to Constitution")," (and thus an extra 2 hit points per HD), and imposing a ",e.createElement("strong",null,"â€“2 size penalty to Dexterity"),"."),e.createElement("li",null,e.createElement("strong",null,"Advancing Creatures:")," When using the method of ",e.createElement("strong",null,"Advancing Racial Hit Dice"),", if a creature increases in size, its ability scores are modified according to the size change rules (Table 2â€“2), which follow the same large fixed increases to Strength and Constitution (e.g., Medium to Large grants ",e.createElement("strong",null,"+8 Str, â€“2 Dex, +4 Con"),")."),e.createElement("li",null,e.createElement("strong",null,"Natural Attacks:")," Size also sets the baseline ",e.createElement("strong",null,"damage dice")," for a creature's natural attacks (like bite or slam). A bite attack from a Small creature deals 1d4 damage, while a bite from a Large creature deals 1d8 damage, and a Colossal creature deals 4d6 damage.")),e.createElement("p",null,"In contrast, the creature ",e.createElement("strong",null,"type")," (e.g., Humanoid, Magical Beast) dictates the ",e.createElement("em",null,"progression rate")," (Medium vs. Fast BAB) and the ",e.createElement("em",null,"type")," of Hit Die (d8 vs. d10), but does not itself provide the massive starting adjustments to the raw Strength, Dexterity, and Constitution scores that size provides."),e.createElement("p",null,"If you'd like the builder to ",e.createElement("em",null,"auto-adjust")," physical ability scores when Size changes (e.g., Large â†’ set Str/Dex/Con to Large defaults), I can implement that as an optional behavior."))),e.createElement("details",{style:{background:"#fff",border:"1px solid #e6edf3",borderRadius:10,padding:12,fontSize:13,color:"#0f172a"}},e.createElement("summary",{style:{fontWeight:700,cursor:"pointer",marginBottom:8}},"CR & HD Basics (min die size and CR 1/2)"),e.createElement("div",{style:{lineHeight:1.5}},e.createElement("p",null,e.createElement("strong",null,"Minimum Hit Die size for monsters is d6.")," Monsters don't typically use a d4 as their HD die; d4 is generally reserved for weapon or natural attack damage on small creatures."),e.createElement("p",null,e.createElement("strong",null,"CR 1/2 and lower exist:")," The builder supports fractional CRs (e.g., 1/8, 1/6, 1/4, 1/3, 1/2). These represent very small or weak threats."),e.createElement("div",{style:{display:"grid",gap:6}},e.createElement("div",{style:{fontWeight:700}},"Common Benchmarks"),e.createElement("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13}},e.createElement("thead",null,e.createElement("tr",{style:{textAlign:"left"}},e.createElement("th",{style:{padding:"4px 6px",fontWeight:700}},"CR"),e.createElement("th",{style:{padding:"4px 6px",fontWeight:700}},"Target HP"),e.createElement("th",{style:{padding:"4px 6px",fontWeight:700}},"Target AC"),e.createElement("th",{style:{padding:"4px 6px",fontWeight:700}},"XP"))),e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{style:{padding:"4px 6px"}},"1/2"),e.createElement("td",{style:{padding:"4px 6px"}},"~10"),e.createElement("td",{style:{padding:"4px 6px"}},"~11"),e.createElement("td",{style:{padding:"4px 6px"}},"200")),e.createElement("tr",null,e.createElement("td",{style:{padding:"4px 6px"}},"1"),e.createElement("td",{style:{padding:"4px 6px"}},"~15"),e.createElement("td",{style:{padding:"4px 6px"}},"~12"),e.createElement("td",{style:{padding:"4px 6px"}},"400")),e.createElement("tr",null,e.createElement("td",{style:{padding:"4px 6px"}},"1/3"),e.createElement("td",{style:{padding:"4px 6px"}},"~9"),e.createElement("td",{style:{padding:"4px 6px"}},"~10"),e.createElement("td",{style:{padding:"4px 6px"}},"135"))))),e.createElement("p",{style:{marginTop:8}},e.createElement("strong",null,"Practical tip:")," If you're building a very low-CR opponent, aim for 1 HD and use templates or class levels for humanoids/NPCs rather than making racial HD d4."))),e.createElement("details",{style:{background:"#fff",border:"1px solid #e6edf3",borderRadius:10,padding:12,fontSize:13,color:"#0f172a"}},e.createElement("summary",{style:{fontWeight:700,cursor:"pointer",marginBottom:8}},"Templates: Categories & Quick Overview"),e.createElement("div",{style:{lineHeight:1.5}},e.createElement("p",null,e.createElement("strong",null,"Templates")," are rule overlays applied to an existing creature to create a variant with modified statistics and abilities. Templates are commonly ",e.createElement("em",null,"Simple"),", ",e.createElement("em",null,"Inherited"),", or ",e.createElement("em",null,"Acquired"),", affecting CR and core stats differently."),e.createElement("div",{style:{display:"grid",gap:8}},e.createElement("div",{style:{fontWeight:700}},"Simple Templates (Quick variants)"),e.createElement("ul",null,e.createElement("li",null,e.createElement("strong",null,"Advanced:")," +1 CR, +4 to ability scores, +2 HP/HD, +4 AC/CMD."),e.createElement("li",null,e.createElement("strong",null,"Giant:")," +1 CR, size +1 category, Str +4, Con +4, Dex â€“2, +3 natural armor."),e.createElement("li",null,e.createElement("strong",null,"Young:")," â€“1 CR, size â€“1 category, Str â€“4, Con â€“4, Dex +4, reduced HP and AC."),e.createElement("li",null,e.createElement("strong",null,"Celestial/Fiendish:")," Typically +0 or +1 CR (only +1 if base HD â‰¥ 5); add energy resistances, DR, SR, and smite abilities depending on alignment.")),e.createElement("div",{style:{fontWeight:700}},"Acquired Templates (Late-life transformations)"),e.createElement("ul",null,e.createElement("li",null,e.createElement("strong",null,"Skeleton/Zombie:")," Change the creature to Undead; recalculate HD/HP using Charisma; adjust CR and traits."),e.createElement("li",null,e.createElement("strong",null,"Ghost/Lich:")," Adds Undead type and significant structural and mechanical changes (sometimes high CR).")),e.createElement("div",{style:{fontWeight:700}},"Inherited Templates"),e.createElement("ul",null,e.createElement("li",null,e.createElement("strong",null,"Half-Dragon/Half-Fiend:")," Part of the creature from birth; apply strong ability adjustments and traits at creation.")),e.createElement("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:8,display:"grid",gap:6}},e.createElement("div",{style:{fontWeight:700}},"Recommended Apply Sequence (for builder programs)"),e.createElement("ol",{style:{paddingLeft:16}},e.createElement("li",null,"Apply Size Changes (if template changes size)."),e.createElement("li",null,"Apply Ability Score Adjustments (templates, templates effects, and size modifiers)."),e.createElement("li",null,"Recalculate HP (accounting for CON and HD), feat count, and skill ranks."),e.createElement("li",null,"Recalculate derived stats (AC, BAB, Saves, CMB/CMD, damage dice).")))))),e.createElement("div",{style:{fontSize:13,color:"#475569"}},"Determines durability, feats, and saves. You can override the HD die with the control next to the HD input.")),e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("div",{style:{fontWeight:700}},"Ability Scores"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:10}},[{label:"STR",value:A,onChange:$},{label:"DEX",value:z,onChange:H},{label:"CON",value:Y,onChange:j},{label:"INT",value:h,onChange:W},{label:"WIS",value:u,onChange:m},{label:"CHA",value:k,onChange:R}].map(({label:i,value:t,onChange:n})=>e.createElement("label",{key:i,style:{fontWeight:600,display:"grid",gap:6}},i,e.createElement("input",{type:"number",min:1,max:50,value:t,onChange:s=>n(Number(s.target.value)),style:{border:"1px solid #cbd5f5",borderRadius:8,padding:"8px 10px",fontSize:14,textAlign:"center"}})))),e.createElement("div",{style:{fontSize:13,color:"#475569"}},"Base stats for the creature. INT affects feats; CON affects HP."))))};function ye(l){return`A ${l.role??"Villain"} motivated by ${l.motivation??"power"} wants to...`}function Q(l,o){const a=Math.floor((o-10)/2);return Math.max(1,l*(8+a))}const ee={Aberration:{hd:"d8",bab:"medium",goodSaves:["will"],skillRanks:4,traits:"Bizarre anatomy"},Animal:{hd:"d8",bab:"medium",goodSaves:["fort","ref"],skillRanks:2,traits:"Low-light vision, scent"},Construct:{hd:"d10",bab:"fast",goodSaves:[],skillRanks:2,traits:"Immune to mind-affecting, poison, death effects"},Dragon:{hd:"d12",bab:"fast",goodSaves:["fort","ref","will"],skillRanks:6,traits:"Immune to sleep, paralysis"},Fey:{hd:"d6",bab:"slow",goodSaves:["ref","will"],skillRanks:6,traits:"Often forest/underground"},Humanoid:{hd:"d8",bab:"medium",goodSaves:["any"],skillRanks:2,traits:"Breathe, eat, sleep"},"Magical Beast":{hd:"d10",bab:"fast",goodSaves:["fort","ref"],skillRanks:2,traits:"Darkvision, low-light vision"},"Monstrous Humanoid":{hd:"d10",bab:"fast",goodSaves:["ref","will"],skillRanks:4,traits:"Darkvision, monstrous features"},Ooze:{hd:"d8",bab:"medium",goodSaves:[],skillRanks:2,traits:"Mindless, immune to precision damage"},Outsider:{hd:"d10",bab:"fast",goodSaves:["any","any"],skillRanks:6,traits:"From other planes"},Plant:{hd:"d8",bab:"medium",goodSaves:["fort"],skillRanks:2,traits:"Immune to mind-affecting, sleep, poison"},Undead:{hd:"d8",bab:"medium",goodSaves:["will"],skillRanks:4,traits:"Immune to critical hits, poison, death effects"},Vermin:{hd:"d8",bab:"medium",goodSaves:["fort"],skillRanks:2,traits:"Mindless, immune to mind-affecting"}},te=(l,o)=>o==="slow"?Math.floor(l/2):o==="medium"?Math.floor(l*3/4):l,O=l=>Math.floor((l-10)/2),Z=(l,o)=>{const a=ue[l.creatureType],r=Math.max(1,l.hd),A=a?.goodSaves?.includes(o)??!1?2+Math.floor(r/2):Math.floor(r/3),z=O(o==="Fort"?l.con:o==="Ref"?l.dex:l.wis);return A+z},be=l=>({bab:te(l.hd,ee[l.creatureType].bab),fort:Z(l,"Fort"),ref:Z(l,"Ref"),will:Z(l,"Will")}),le=(l,o)=>{const a=pe[l.size]?.cmbCmdMod??0;return 10+(o??l.bab)+O(l.str)+O(l.dex)+a},he={ok:{bg:"#ecfdf5",color:"#047857",label:"On target"},high:{bg:"#fef3c7",color:"#b45309",label:"High / Damage Sponge"},low:{bg:"#fee2e2",color:"#b91c1c",label:"Low / Glass Jaw"}},J=(l,o)=>{if(o==null||o===0)return"ok";const a=(l-o)/o;return a>.2?"high":a<-.2?"low":"ok"},Ee={NastyBeast:{name:"NastyBeast",targetCR:1,creatureType:"Monstrous Humanoid",hd:2,str:14,dex:12,con:14,int:10,wis:10,cha:10,ac:12,bab:2,fort:2,ref:2,will:0,selectedFeat:"Power Attack",role:"Villain",motivation:"power",treasureType:"Standard",buildPath:"Monster",size:"Medium",alignment:"Neutral"},LowestScores:{name:"LowestScores",targetCR:1,creatureType:"Humanoid",hd:1,str:10,dex:10,con:10,int:10,wis:10,cha:10,ac:10,bab:0,fort:0,ref:0,will:0,selectedFeat:"",role:"Minion",motivation:"survive",treasureType:"None",buildPath:"Monster",size:"Medium",alignment:"Neutral",template:null}},_=(l,o)=>l==="Villain"&&o==="power"?{suggested:"Evil",info:"Villain + Power strongly suggests an Evil alignment (Lawful, Neutral, or Chaotic Evil depending on the approach).",example:"LE / NE / CE"}:l==="Villain"?{suggested:"Likely Evil",info:"Villain role often suggests malevolent intent and alignment leaning evil."}:{suggested:"Varies",info:"Role and motivation do not strongly imply a specific alignment."},S=["Foundation","Mechanics","Narrative","Treasury"],xe=l=>{const a={complete:{bg:"#e0e7ff",border:"#c7d2fe",color:"#312e81"},current:{bg:"#312e81",border:"#312e81",color:"#fff"},upcoming:{bg:"#f1f5f9",border:"#e2e8f0",color:"#64748b"}}[l];return{display:"flex",alignItems:"center",gap:12,padding:"10px 16px",borderRadius:999,border:`1px solid ${a.border}`,background:a.bg,color:a.color,minWidth:160,justifyContent:"flex-start",transition:"box-shadow 0.2s ease",boxShadow:l==="current"?"0 8px 20px #312e8118":"none",cursor:"pointer"}},ve={critical:{icon:"â›”",color:"#b91c1c",bg:"#fef2f2",border:"#fecaca"},warning:{icon:"âš ï¸",color:"#b45309",bg:"#fffbeb",border:"#fcd34d66"},note:{icon:"â„¹ï¸",color:"#2563eb",bg:"#eff6ff",border:"#bfdbfe"}},Ce={structure:{guidance:"CR and Hit Dice should stay in sync to avoid illegal math.",quickFixKey:"alignCrHd",quickFixLabel:"Match CR to HD",ctaLabel:"Open Foundation",ctaStep:0},basics:{guidance:"Review feats, XP, and chassis math inside Mechanics.",ctaLabel:"Go to Mechanics",ctaStep:1},benchmarks:{guidance:"Tweak CR or HD until HP/AC benchmarks land in the safe range.",ctaLabel:"Adjust Mechanics",ctaStep:1},economy:{guidance:"Adjust treasure tier or gear in the Treasury step.",ctaLabel:"Open Treasury",ctaStep:3}},Se={name:"New Creature",targetCR:1,creatureType:"Humanoid",size:"Medium",hd:2,hdDie:"d8",str:10,dex:10,con:14,int:10,wis:10,cha:10,ac:12,bab:1,fort:2,ref:0,will:0,selectedFeat:"Improved Initiative",role:"Villain",motivation:"power",treasureType:"Standard",alignment:"Neutral",buildPath:"Monster",template:null},ke=(l,o)=>o<=0?0:1+Math.floor((l-1)/2),re=l=>({padding:"8px 14px",borderRadius:999,border:"1px solid",borderColor:l?"#4338ca":"#e5e7eb",background:l?"#eef2ff":"#fff",color:l?"#312e81":"#111827",fontWeight:l?700:600,cursor:"pointer",boxShadow:l?"0 1px 6px #4338ca1c":"0 1px 2px #0000000d"}),oe=()=>{const[l,o]=d.useState(0),[a,r]=d.useState(Se),w={None:()=>({template:null}),"Advanced Creature":t=>({template:"Advanced Creature",targetCR:Math.min(25,t.targetCR+1),str:t.str+4,dex:t.dex+4,con:t.con+4,int:Math.max(t.int,3)+4,wis:t.wis+4,cha:t.cha+4,ac:t.ac+4}),"Giant Creature":t=>({template:"Giant Creature",targetCR:Math.min(25,t.targetCR+1),str:t.str+4,con:t.con+4,dex:Math.max(1,t.dex-2),ac:t.ac+3}),"Young Creature":t=>({template:"Young Creature",targetCR:Math.max(1,t.targetCR-1),str:Math.max(1,t.str-4),con:Math.max(1,t.con-4),dex:t.dex+4,ac:Math.max(0,t.ac-2)}),"Celestial Creature":t=>({template:"Celestial Creature",targetCR:t.hd>=5?Math.min(25,t.targetCR+1):t.targetCR,ac:t.ac+0}),"Fiendish Creature":t=>({template:"Fiendish Creature",targetCR:t.hd>=5?Math.min(25,t.targetCR+1):t.targetCR,ac:t.ac+0}),Skeleton:t=>({template:"Skeleton",creatureType:"Undead",targetCR:t.targetCR,hd:t.hd,str:t.str,dex:t.dex,con:t.con,cha:t.cha,ac:t.ac+2}),Zombie:t=>({template:"Zombie",creatureType:"Undead",targetCR:t.targetCR,ac:t.ac}),"Half-Dragon":t=>({template:"Half-Dragon",str:t.str+8,con:t.con+6,int:t.int+2,cha:t.cha+2}),"Half-Fiend":t=>({template:"Half-Fiend",str:t.str+2,con:t.con+2,int:t.int+2,cha:t.cha+2}),Lich:t=>({template:"Lich",creatureType:"Undead",targetCR:Math.min(25,t.targetCR+2)}),Ghost:t=>({template:"Ghost",creatureType:"Undead",targetCR:Math.min(25,t.targetCR+1)})},A=t=>{const n=w[t];n&&r(s=>{const p=n(s),C={...s,...p};return C.bab=te(C.hd,ee[C.creatureType].bab),C})},z=l<S.length-1?`Next: ${S[l+1]}`:"Finish",Y=l===0?"Back":`Back to ${S[l-1]}`,h=Q(a.hd,a.con),u=d.useMemo(()=>de(a.targetCR.toString()),[a.targetCR]),k=d.useMemo(()=>ce(a.targetCR.toString()),[a.targetCR]),K=d.useMemo(()=>({estimate:k??null,max:k?k*2:null,hpBenchmark:u?.hp??null,totalHD:a.hd,canonicalXP:ne[a.targetCR.toString()]??null}),[u?.hp,k,a.hd,a.targetCR]),M=ke(a.hd,a.int),y=d.useMemo(()=>be(a),[a.hd,a.creatureType,a.con,a.dex,a.wis]),E=d.useMemo(()=>le(a,y.bab),[a.size,a.str,a.dex,y.bab]),b=d.useMemo(()=>le(a),[a.size,a.str,a.dex,a.bab]),$=b!==E,H=d.useMemo(()=>u?[{key:"hp",label:"HP Budget",actual:h,expected:u.hp,status:J(h,u.hp),helper:"Keep HP within Â±20% of CR baseline."},{key:"ac",label:"Armor Class",actual:a.ac,expected:u.ac,status:J(a.ac,u.ac),helper:"Extreme AC differences distort to-hit math."},{key:"cmd",label:"CMD (Legal)",actual:b,expected:E,status:J(b,E),helper:"Uses legal BAB + Str/Dex + size."}]:[],[u,h,a.ac,b,E]),j=()=>r(t=>({...t,bab:y.bab})),W=t=>r(n=>({...n,[t]:y[t]})),m=ee[a.creatureType],R=te(a.hd,m.bab),G=a.bab!==R,g=d.useMemo(()=>({name:a.name||"Creature",cr:a.targetCR.toString(),xp:ne[a.targetCR.toString()]||0,size:a.size,type:a.creatureType,racialHD:a.hd,hp:Q(a.hd,a.con),hp_claimed:Q(a.hd,a.con),ac:a.ac,ac_claimed:a.ac,fort:a.fort,ref:a.ref,will:a.will,fort_save_claimed:a.fort,ref_save_claimed:a.ref,will_save_claimed:a.will,bab:a.bab,bab_claimed:a.bab,str:a.str,dex:a.dex,con:a.con,int:a.int,wis:a.wis,cha:a.cha,feats:Array.from({length:M},(t,n)=>a.selectedFeat||`Feat ${n+1}`),treasureType:a.treasureType}),[a.hd,a.name,a.targetCR,a.treasureType,a.creatureType,a.str,a.dex,a.con,a.int,a.wis,a.cha,a.ac,a.bab,a.fort,a.ref,a.will,a.selectedFeat,M]),D=d.useMemo(()=>ie(g),[g]),T=d.useMemo(()=>me(g),[g]),F=d.useMemo(()=>se(g),[g]),f=d.useMemo(()=>[...D.messages||[],...T.messages||[],...F.messages||[]],[D.messages,T.messages,F.messages]),P=d.useMemo(()=>f.filter(t=>t.severity!=="note"),[f]),B=d.useMemo(()=>f.some(t=>t.severity==="critical")?"FAIL":f.some(t=>t.severity==="warning")?"WARN":"PASS",[f]),c=D.messages.filter(t=>t.category==="structure"),L=f.filter(t=>["structure","benchmarks","basics"].includes(t.category)),V=f.filter(t=>t.category==="economy"),x=L.filter(t=>t.category!=="structure"&&t.severity!=="note"),N=t=>t==="FAIL"?"#b91c1c":t==="WARN"?"#b45309":"#15803d",I=d.useMemo(()=>l===0?a.name.trim().length>0:!0,[a.name,l]),U=d.useMemo(()=>[{label:`CR ${a.targetCR}`,tone:"#312e81"},{label:`${a.size}`,tone:"#0f766e"},{label:a.creatureType,tone:"#0f766e"},{label:a.buildPath,tone:"#7c2d12"},{label:a.role||"Role TBD",tone:"#9a3412"},{label:a.treasureType||"Treasure TBD",tone:"#1d4ed8"},{label:`Align: ${a.alignment}`,tone:"#a21caf"},{label:`Rules: ${B}`,tone:N(B)}],[B,a.buildPath,a.creatureType,a.role,a.targetCR,a.treasureType]),q=t=>{typeof t=="number"&&o(t)},v=t=>{const n=Ee[t];r(s=>({...s,...n}))},i=t=>{switch(t){case"alignCrHd":r(n=>({...n,targetCR:Math.min(25,Math.max(1,n.hd))}));break}};return e.createElement("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc, #eef2ff)"}},e.createElement("div",{style:{maxWidth:1200,margin:"32px auto",padding:"0 16px 48px"}},e.createElement("div",{style:{background:"#fff",borderRadius:16,boxShadow:"0 12px 40px #0f172a1a",padding:24,border:"1px solid #e5e7eb"}},e.createElement("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:12}},e.createElement("div",null,e.createElement("h1",{style:{margin:"0 0 4px"}},"Bestiary Architect"),e.createElement("div",{style:{color:"#6b7280"}},"Interactive builder for Pathfinder monsters and NPCs")),e.createElement("div",{style:{color:"#6b7280",fontWeight:600,fontSize:13}},"Step ",l+1," of ",S.length)),e.createElement("nav",{style:{marginBottom:20}},e.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:12}},S.map((t,n)=>{const s=n<l?"complete":n===l?"current":"upcoming";return e.createElement(e.Fragment,{key:t},e.createElement("button",{type:"button",onClick:()=>o(n),style:xe(s),"aria-current":s==="current"?"step":void 0},e.createElement("span",{style:{width:32,height:32,borderRadius:"50%",border:s==="current"?"2px solid #fff":"2px solid transparent",background:s==="current"?"#4338ca":s==="complete"?"#c7d2fe":"#fff",color:s==="current"?"#fff":s==="complete"?"#312e81":"#94a3b8",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:700}},n+1),e.createElement("div",{style:{textAlign:"left"}},e.createElement("div",{style:{fontSize:12,fontWeight:600,lineHeight:1}},"Step ",n+1),e.createElement("div",{style:{fontSize:14,fontWeight:700}},t))),n<S.length-1&&e.createElement("div",{"aria-hidden":!0,style:{alignSelf:"center",flexGrow:1,minWidth:30,height:2,background:n<l?"#c7d2fe":"#e2e8f0"}}))}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.65fr) minmax(260px, 1fr)",gap:20,alignItems:"start"}},e.createElement("div",{style:{display:"grid",gap:16}},l===0&&e.createElement(e.Fragment,null,e.createElement(fe,{name:a.name,targetCR:a.targetCR,creatureType:a.creatureType,size:a.size,hd:a.hd,str:a.str,dex:a.dex,con:a.con,int:a.int,wis:a.wis,cha:a.cha,buildPath:a.buildPath,onNameChange:t=>r(n=>({...n,name:t})),onTargetCRChange:t=>r(n=>({...n,targetCR:t})),onCreatureTypeChange:t=>r(n=>({...n,creatureType:t})),onHdChange:t=>r(n=>({...n,hd:t})),hdDie:a.hdDie,onHdDieChange:t=>r(n=>({...n,hdDie:t})),onStrChange:t=>{console.debug("[BestiaryArchitectApp] onStrChange ->",t),r(n=>({...n,str:t}))},onDexChange:t=>{console.debug("[BestiaryArchitectApp] onDexChange ->",t),r(n=>({...n,dex:t}))},onConChange:t=>{console.debug("[BestiaryArchitectApp] onConChange ->",t),r(n=>({...n,con:t}))},onIntChange:t=>r(n=>({...n,int:t})),onWisChange:t=>r(n=>({...n,wis:t})),onChaChange:t=>r(n=>({...n,cha:t})),onBuildPathChange:t=>r(n=>({...n,buildPath:t})),onLoadPreset:v,onApplyTemplate:A,template:a.template,onTemplateChange:t=>r(n=>({...n,template:t})),onSizeChange:t=>r(n=>({...n,size:t})),hdGuardrail:K}),c.length>0&&e.createElement("div",{style:{border:"1px solid #f59e0b",background:"#fffbeb",borderRadius:10,padding:12}},e.createElement("div",{style:{fontWeight:700,color:"#b45309",marginBottom:6}},"Rules Lawyer: Structural mismatch"),e.createElement("ul",{style:{margin:0,paddingLeft:18,color:"#92400e"}},c.map((t,n)=>e.createElement("li",{key:n,style:{marginBottom:4}},t.message," ",t.expected?`(Expected: ${t.expected})`:""," ",t.actual?`(Actual: ${t.actual})`:""))),e.createElement("button",{onClick:()=>r(t=>({...t,targetCR:Math.min(25,t.hd)})),style:{marginTop:8,padding:"8px 12px",borderRadius:8,border:"1px solid #d97706",background:"#fef3c7",color:"#92400e",fontWeight:700,cursor:"pointer"}},"Adjust CR to HD (quick fix)"))),l===1&&e.createElement("div",{style:{display:"grid",gap:12}},e.createElement("h2",{style:{margin:0}},"Mechanics Engine"),e.createElement("p",{style:{margin:0,color:"#4b5563"}},"Align stats to your creature type. Tune AC, refine BAB, select feats, and verify synergy."),e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("div",{style:{background:"#f0f9ff",border:"1px solid #38bdf8",borderRadius:10,padding:12}},e.createElement("div",{style:{fontWeight:700,color:"#0369a1",marginBottom:6}},"Type: ",a.creatureType),e.createElement("div",{style:{fontSize:13,color:"#0c4a6e"}},e.createElement("strong",null,"Expected Mechanics:")," ",a.hdDie||m.hd," HD, ",m.bab," BAB progression (suggested +",R,"), good saves: ",m.goodSaves.join(", ")||"none",", ",m.skillRanks," skill ranks/HD.")),H.length>0&&e.createElement("div",{style:{display:"grid",gap:10,gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"}},H.map(t=>{const n=he[t.status];return e.createElement("div",{key:t.key,style:{borderRadius:12,padding:12,border:`1px solid ${n.color}33`,background:n.bg,boxShadow:"0 4px 12px rgba(15,23,42,0.08)"}},e.createElement("div",{style:{fontSize:12,fontWeight:700,color:n.color,letterSpacing:.4,textTransform:"uppercase"}},t.label),e.createElement("div",{style:{fontSize:28,fontWeight:700,color:"#0f172a",lineHeight:1.2}},t.actual),e.createElement("div",{style:{fontSize:12,color:"#475569"}},"Benchmark: ",t.expected??"â€”"),e.createElement("div",{style:{marginTop:6,fontSize:12,fontWeight:600,color:n.color}},n.label),e.createElement("div",{style:{fontSize:11,color:"#475569",marginTop:4}},t.helper))})),G&&e.createElement("div",{style:{border:"1px solid #7c3aed",background:"#f5f3ff",borderRadius:10,padding:12}},e.createElement("div",{style:{fontWeight:700,color:"#5b21b6",marginBottom:6}},"Type-Based BAB Suggestion"),e.createElement("div",{style:{color:"#6b21a8",marginBottom:8}},"Your ",a.creatureType," with ",a.hd," HD uses ",e.createElement("strong",null,m.bab," progression"),", suggesting a BAB of ",e.createElement("strong",null,"+",R),". Current BAB: ",e.createElement("strong",null,"+",a.bab),"."),e.createElement("button",{onClick:j,style:{padding:"6px 12px",borderRadius:8,border:"1px solid #a78bfa",background:"#ede9fe",color:"#5b21b6",fontWeight:600,cursor:"pointer"}},"Apply Suggested BAB")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:10}},e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"AC Base",e.createElement("input",{type:"number",min:10,max:50,value:10+Math.floor((a.dex-10)/2),readOnly:!0,style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14,background:"#f9fafb"}})),e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"AC Total",e.createElement("input",{type:"number",min:10,max:50,value:a.ac,onChange:t=>r(n=>({...n,ac:Number(t.target.value)})),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}})),e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"BAB",e.createElement("input",{type:"number",min:0,max:20,value:a.bab,onChange:t=>r(n=>({...n,bab:Number(t.target.value)})),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}}))),e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("div",{style:{fontWeight:700}},"Saving Throws"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:10}},e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"Fort",e.createElement("input",{type:"number",value:a.fort,onChange:t=>r(n=>({...n,fort:Number(t.target.value)})),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",fontSize:14}}),e.createElement("small",{style:{fontSize:11,color:"#475569"}},"Target: +",y.fort),e.createElement("button",{type:"button",onClick:()=>W("fort"),style:{fontSize:11,padding:"4px 6px",borderRadius:6,border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer"}},"Set to legal")),e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"Ref",e.createElement("input",{type:"number",value:a.ref,onChange:t=>r(n=>({...n,ref:Number(t.target.value)})),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",fontSize:14}}),e.createElement("small",{style:{fontSize:11,color:"#475569"}},"Target: +",y.ref),e.createElement("button",{type:"button",onClick:()=>W("ref"),style:{fontSize:11,padding:"4px 6px",borderRadius:6,border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer"}},"Set to legal")),e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"Will",e.createElement("input",{type:"number",value:a.will,onChange:t=>r(n=>({...n,will:Number(t.target.value)})),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",fontSize:14}}),e.createElement("small",{style:{fontSize:11,color:"#475569"}},"Target: +",y.will),e.createElement("button",{type:"button",onClick:()=>W("will"),style:{fontSize:11,padding:"4px 6px",borderRadius:6,border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer"}},"Set to legal")))),e.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:12,alignItems:"center"}},e.createElement("div",{style:{fontWeight:700}},"CMD Check"),e.createElement("div",{style:{fontSize:13,color:"#475569"}},"Current: ",b," â€¢ Legal Math: ",E),$&&e.createElement("div",{style:{padding:"6px 10px",borderRadius:8,background:"#fef3c7",color:"#92400e",fontSize:12,fontWeight:600}},"Update BAB to sync CMD")),e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("div",{style:{fontWeight:700}},"Feat Selection (",M,")"),e.createElement("select",{value:a.selectedFeat,onChange:t=>r(n=>({...n,selectedFeat:t.target.value})),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"8px 10px",fontSize:14}},e.createElement("option",{value:"Improved Initiative"},"Improved Initiative (Villain: Act first in combat)"),e.createElement("option",{value:"Power Attack"},"Power Attack (Melee: Trade accuracy for damage)"),e.createElement("option",{value:"Toughness"},"Toughness (Survivability: +3 HP for 1 HD)"),e.createElement("option",{value:"Weapon Focus"},"Weapon Focus (Melee: +1 on one attack type)"),e.createElement("option",{value:"Combat Reflexes"},"Combat Reflexes (Tactics: Extra AoO per round)"),e.createElement("option",{value:"Dodge"},"Dodge (Defense: +1 AC vs. one opponent)")),e.createElement("div",{style:{fontSize:12,color:"#475569",fontStyle:"italic"}},a.selectedFeat==="Improved Initiative"?"âœ“ Villain synergy: Act before enemies to control encounter.":a.selectedFeat==="Power Attack"?"âœ“ Offensive: Boost damage at the cost of accuracy. Pairs well with high BAB or STR.":a.selectedFeat==="Toughness"?"âœ“ Durability: Gain +3 HP to stay in the fight longer.":a.selectedFeat==="Weapon Focus"?"âœ“ Accuracy: +1 on attack rolls with one weapon type. Great for low-BAB creatures.":a.selectedFeat==="Combat Reflexes"?"âœ“ Tactics: Make extra attacks of opportunity each round. Synergizes with DEX.":a.selectedFeat==="Dodge"?"âœ“ Defense: Gain +1 AC against one foe per round. Stacks with other AC bonuses.":"Choose a feat to see synergy guidance.")),e.createElement("div",{style:{color:"#111827",fontWeight:600}},"Calculated HP: ",e.createElement("span",{style:{color:"#4338ca"}},h)," (based on HD and CON)"),c.length>0&&e.createElement("div",{style:{border:"1px solid #f59e0b",background:"#fffbeb",borderRadius:10,padding:12}},e.createElement("div",{style:{fontWeight:700,color:"#b45309",marginBottom:6}},"Rules Lawyer: Structural mismatch"),e.createElement("ul",{style:{margin:0,paddingLeft:18,color:"#92400e"}},c.map((t,n)=>e.createElement("li",{key:n,style:{marginBottom:4}},t.message," ",t.expected?`(Expected: ${t.expected})`:""," ",t.actual?`(Actual: ${t.actual})`:""))),e.createElement("button",{onClick:()=>r(t=>({...t,targetCR:Math.min(25,t.hd)})),style:{marginTop:8,padding:"8px 12px",borderRadius:8,border:"1px solid #d97706",background:"#fef3c7",color:"#92400e",fontWeight:700,cursor:"pointer"}},"Adjust CR to HD (quick fix)")),x.length>0&&e.createElement("div",{style:{border:"1px solid #c084fc",background:"#f5f3ff",borderRadius:10,padding:12}},e.createElement("div",{style:{fontWeight:700,color:"#6b21a8",marginBottom:6}},"Rules Lawyer: Benchmarks"),e.createElement("ul",{style:{margin:0,paddingLeft:18,color:"#6b21a8"}},x.map((t,n)=>e.createElement("li",{key:n,style:{marginBottom:4}},t.message," ",t.expected?`(Expected: ${t.expected})`:""," ",t.actual?`(Actual: ${t.actual})`:"")))))),l===2&&e.createElement("div",{style:{display:"grid",gap:12}},e.createElement("h2",{style:{margin:0}},"Narrative Weaver"),e.createElement("p",{style:{margin:0,color:"#4b5563"}},"Give the creature purpose and tone."),e.createElement("label",{style:{display:"grid",gap:6,fontWeight:600}},"Role",e.createElement("input",{value:a.role,onChange:t=>r(n=>({...n,role:t.target.value})),placeholder:"Villain, Helper, Minion",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}})),e.createElement("label",{style:{display:"grid",gap:6,fontWeight:600}},"Motivation",e.createElement("input",{value:a.motivation,onChange:t=>r(n=>({...n,motivation:t.target.value})),placeholder:"power, revenge, devotion",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}})),e.createElement("div",{style:{display:"grid",gap:6}},e.createElement("label",{style:{display:"grid",gap:6,fontWeight:600}},"Alignment",e.createElement("select",{value:a.alignment,onChange:t=>r(n=>({...n,alignment:t.target.value})),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}},e.createElement("option",null,"Lawful Good"),e.createElement("option",null,"Neutral Good"),e.createElement("option",null,"Chaotic Good"),e.createElement("option",null,"Lawful Neutral"),e.createElement("option",null,"Neutral"),e.createElement("option",null,"Chaotic Neutral"),e.createElement("option",null,"Lawful Evil"),e.createElement("option",null,"Neutral Evil"),e.createElement("option",null,"Chaotic Evil"))),e.createElement("div",{style:{fontSize:13,color:"#475569"}},e.createElement("strong",null,"Suggested Alignment:")," ",_(a.role,a.motivation).suggested," â€” ",_(a.role,a.motivation).info,e.createElement("div",{style:{marginTop:6}},e.createElement("button",{onClick:()=>r(t=>({...t,alignment:_(t.role,t.motivation).suggested==="Evil"?"Neutral Evil":_(t.role,t.motivation).suggested})),style:{marginTop:6,padding:"6px 10px",borderRadius:8,border:"1px solid #cbd5f5",background:"#fff",cursor:"pointer"}},"Apply Suggested Alignment")))),e.createElement("div",{style:{background:"#f5f3ff",border:"1px solid #e0e7ff",padding:12,borderRadius:10,color:"#312e81"}},e.createElement("div",{style:{fontWeight:700,marginBottom:4}},"Prompt starter"),e.createElement("div",{style:{fontStyle:"italic",lineHeight:1.5}},ye({role:["Villain","Helper","Minion"].includes(a.role)?a.role:void 0,motivation:a.motivation})))),l===3&&e.createElement("div",{style:{display:"grid",gap:12}},e.createElement("h2",{style:{margin:0}},"Treasury & Lair"),e.createElement("p",{style:{margin:0,color:"#4b5563"}},"Choose treasure and habitat hooks."),e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"Treasure Type",e.createElement("select",{value:a.treasureType,onChange:t=>r(n=>({...n,treasureType:t.target.value})),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}},e.createElement("option",null,"Standard"),e.createElement("option",null,"Double"),e.createElement("option",null,"NPC Gear"),e.createElement("option",null,"None"))),e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"Environment",e.createElement("input",{placeholder:"e.g. temperate forest",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}})),e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"Organization",e.createElement("input",{placeholder:"solitary, pair, gang",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}})),V.filter(t=>t.severity!=="note").length>0&&e.createElement("div",{style:{border:"1px solid #f59e0b",background:"#fffbeb",borderRadius:10,padding:12}},e.createElement("div",{style:{fontWeight:700,color:"#b45309",marginBottom:6}},"Rules Lawyer: Economy"),e.createElement("ul",{style:{margin:0,paddingLeft:18,color:"#92400e"}},V.filter(t=>t.severity!=="note").map((t,n)=>e.createElement("li",{key:n,style:{marginBottom:4}},t.message," ",t.expected?`(Expected: ${t.expected})`:""," ",t.actual?`(Actual: ${t.actual})`:"")))))),e.createElement("aside",{style:{background:"#f8fafc",border:"1px solid #e5e7eb",borderRadius:14,padding:16,boxShadow:"inset 0 1px 0 #fff"}},e.createElement("div",{style:{fontWeight:700,marginBottom:8}},"Creature Snapshot"),e.createElement("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:12}},U.map(t=>e.createElement("span",{key:t.label,style:{background:`${t.tone}14`,color:t.tone,border:`1px solid ${t.tone}33`,padding:"6px 10px",borderRadius:999,fontWeight:600,fontSize:12}},t.label))),e.createElement("div",{style:{display:"grid",gap:8,color:"#374151"}},e.createElement("div",null,e.createElement("strong",null,"Name:")," ",a.name),e.createElement("div",null,e.createElement("strong",null,"Role:")," ",a.role),e.createElement("div",null,e.createElement("strong",null,"Motivation:")," ",a.motivation),e.createElement("div",null,e.createElement("strong",null,"Treasure:")," ",a.treasureType)),e.createElement("div",{style:{marginTop:10,padding:"10px 12px",background:"#ffffff",border:"1px dashed #e5e7eb",borderRadius:10,display:"grid",gap:6,color:"#111827"}},e.createElement("div",{style:{fontWeight:700}},"Quick Stats"),e.createElement("div",{style:{fontSize:12,color:"#475569",fontStyle:"italic",marginBottom:6}},e.createElement("strong",null,a.creatureType)," | ",a.hdDie||m.hd," HD | ",m.bab," BAB | ",m.skillRanks," skill ranks/HD"),e.createElement("div",{style:{display:"grid",gap:4,fontSize:13}},e.createElement("div",null,e.createElement("strong",null,"HD:")," ",a.hd,a.hdDie?` ${a.hdDie}`:`d${m.hd.slice(1)}`),e.createElement("div",null,e.createElement("strong",null,"Size:")," ",a.size),e.createElement("div",null,e.createElement("strong",null,"HP (est):")," ",h),e.createElement("div",null,e.createElement("strong",null,"AC:")," ",a.ac),e.createElement("div",null,e.createElement("strong",null,"BAB:")," +",a.bab," ",G?`(type suggests +${R})`:"âœ“"),e.createElement("div",null,e.createElement("strong",null,"Saves:")," Fort +",a.fort," / Ref +",a.ref," / Will +",a.will),e.createElement("div",null,e.createElement("strong",null,"STR/DEX/CON:")," ",a.str,"/",a.dex,"/",a.con),e.createElement("div",null,e.createElement("strong",null,"INT/WIS/CHA:")," ",a.int,"/",a.wis,"/",a.cha),e.createElement("div",null,e.createElement("strong",null,"Feat:")," ",a.selectedFeat),e.createElement("div",null,e.createElement("strong",null,"Alignment:")," ",a.alignment))),e.createElement("div",{style:{marginTop:14,paddingTop:12,borderTop:"1px solid #e5e7eb"}},e.createElement("div",{style:{fontWeight:700,marginBottom:6}},"Rules Lawyer Workbench"),e.createElement("div",{style:{fontSize:13,color:"#4b5563",marginBottom:8}},"Live checks from Basics, Benchmarks, and Economy."),P.length===0?e.createElement("div",{style:{color:"#15803d",fontWeight:600}},"No issues detected for current inputs."):e.createElement("div",{style:{display:"grid",gap:10}},P.map((t,n)=>{const s=ve[t.severity],p=Ce[t.category],C=!!p?.quickFixKey,ae=p?.ctaLabel&&typeof p.ctaStep=="number";return e.createElement("div",{key:`${t.category}-${n}`,style:{border:`1px solid ${s.border}`,background:s.bg,borderRadius:12,padding:12,color:s.color}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:10}},e.createElement("span",{"aria-hidden":!0,style:{fontSize:18}},s.icon),e.createElement("div",null,e.createElement("div",{style:{fontWeight:700,textTransform:"capitalize",color:"#111827"}},t.category),e.createElement("div",{style:{fontSize:12}},t.severity.toUpperCase())))),e.createElement("p",{style:{margin:"8px 0",color:"#111827"}},t.message),(t.expected!==void 0||t.actual!==void 0)&&e.createElement("div",{style:{display:"flex",gap:16,flexWrap:"wrap",fontSize:13,color:"#0f172a"}},t.expected!==void 0&&e.createElement("div",null,e.createElement("strong",null,"Expected:")," ",String(t.expected)),t.actual!==void 0&&e.createElement("div",null,e.createElement("strong",null,"Actual:")," ",String(t.actual))),p?.guidance&&e.createElement("div",{style:{marginTop:8,fontSize:13,color:"#475569"}},p.guidance),(C||ae)&&e.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:10}},C&&p?.quickFixKey&&e.createElement("button",{type:"button",onClick:()=>i(p.quickFixKey),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #c4b5fd",background:"#ede9fe",color:"#4c1d95",fontWeight:600,cursor:"pointer"}},p.quickFixLabel||"Apply quick fix"),ae&&e.createElement("button",{type:"button",onClick:()=>q(p.ctaStep),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #cbd5f5",background:"#fff",color:"#1e1b4b",fontWeight:600,cursor:"pointer"}},p.ctaLabel)))}))))),e.createElement("footer",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:20}},e.createElement("div",{style:{color:"#475569",fontSize:13,fontWeight:500}},l===0&&"Complete the foundation card, then jump into Mechanics.",l===1&&"Review mechanics and add special abilities.",l===2&&"Capture story hooks, then define treasure.",l===3&&"Lock in loot or revisit earlier steps as needed."),e.createElement("div",{style:{display:"flex",gap:8}},e.createElement("button",{onClick:()=>o(t=>Math.max(0,t-1)),disabled:l===0,style:{...re(!1),opacity:l===0?.5:1,cursor:l===0?"not-allowed":"pointer"}},Y),e.createElement("button",{onClick:()=>o(t=>Math.min(S.length-1,t+1)),disabled:!I,style:{...re(!0),background:"#312e81",color:"#fff",borderColor:"#312e81",opacity:I?1:.5,cursor:I?"pointer":"not-allowed"}},z))))))},Me={title:"Tools/Bestiary Architect",component:oe,parameters:{layout:"padded"}},X={render:()=>e.createElement(oe,null)};X.parameters={...X.parameters,docs:{...X.parameters?.docs,source:{originalSource:`{
  render: () => <BestiaryArchitectApp />
}`,...X.parameters?.docs?.source}}};const He=["Default"];export{X as Default,He as __namedExportsOrder,Me as default};
