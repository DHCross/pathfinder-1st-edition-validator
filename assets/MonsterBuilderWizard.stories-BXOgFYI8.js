import{r as s,R as e}from"./iframe-OB9P0jGS.js";import{s as D,f}from"./pf1e-formatter-BViDTO6Q.js";import{a as R,v as W}from"./validateBenchmarks-Q5KBnCxV.js";import{X as h}from"./pf1e-data-tables-BqrvN3By.js";import{v as E,a as H,V as z}from"./validateEconomy-BiJbuksb.js";import"./preload-helper-PPVm8Dsz.js";const v={"Fire Beetle":{name:"Fire Beetle",cr:"1",xp:400,size:"Small",type:"Vermin",racialHD:1,hp:50,str:10,dex:11,con:11,ac:12,bab:0,fort:2,ref:0,will:0},"Chaos-Mutated Toad":{name:"Chaos-Mutated Toad",cr:"1",xp:400,size:"Medium",type:"Animal",racialHD:6,hp:120,str:14,dex:12,con:14,ac:12,bab:3,fort:6,ref:2,will:2}},x=()=>{const[i,y]=s.useState(1),[p,k]=s.useState("Fire Beetle"),[o,w]=s.useState(1),[l,b]=s.useState("enforce_cr"),r=v[p]||{},[a,u]=s.useState({}),n=s.useMemo(()=>{const t=a.cr??r.cr??"1",_=h[o.toString()]||r.xp||400;return{name:a.name||r.name||"New Creature",cr:t,xp:_,size:a.size||r.size||"Medium",type:a.type||r.type||"Outsider",racialHD:a.racialHD||r.racialHD||1,hp:a.hp||r.hp||10,str:a.str||r.str||10,dex:a.dex||r.dex||10,con:a.con||r.con||10,ac:a.ac||r.ac||10,bab:a.bab||r.bab||0,fort:a.fort||r.fort||0,ref:a.ref||r.ref||0,will:a.will||r.will||0,int:a.int||r.int||10,wis:a.wis||r.wis||10,cha:a.cha||r.cha||10}},[p,a,o,r]),{block:C}=D(n,h[o.toString()]||n.xp||400),{block:g}=R(C,l),T=E(n),c=l==="enforce_cr"?g:n,S=E(c),B=W(c),M=H(c),d=[...T.messages.filter(t=>t.category==="structure"),...S.messages,...B.messages,...M.messages],F={valid:!d.some(t=>t.severity==="critical"),status:d.some(t=>t.severity==="critical")?"FAIL":d.some(t=>t.severity==="warning")?"WARN":"PASS",messages:d};return e.createElement("div",{style:{padding:12}},e.createElement("h2",null,"Monster Builder Wizard"),e.createElement("div",{style:{display:"flex",gap:12}},e.createElement("div",{style:{width:360,borderRight:"1px solid #e5e7eb",paddingRight:12}},e.createElement("div",{style:{marginBottom:8}},e.createElement("strong",null,"Step ",i," / 3")),i===1&&e.createElement("div",null,e.createElement("label",{style:{display:"block",fontWeight:600}},"Choose Template"),e.createElement("select",{value:p,onChange:t=>k(t.target.value),style:{width:"100%",marginTop:8}},Object.keys(v).map(t=>e.createElement("option",{key:t,value:t},t))),e.createElement("div",{style:{marginTop:12}},e.createElement("label",{style:{display:"block",fontWeight:600}},"Creature Name"),e.createElement("input",{value:a.name??"",onChange:t=>u({...a,name:t.target.value}),style:{width:"100%",marginTop:6}}))),i===2&&e.createElement("div",null,e.createElement("label",{style:{display:"block",fontWeight:600}},"Target CR: ",o),e.createElement("input",{type:"range",min:1,max:20,value:o,onChange:t=>w(parseInt(t.target.value))}),e.createElement("div",{style:{marginTop:8}},e.createElement("label",{style:{display:"block",fontWeight:600}},"Racial HD"),e.createElement("input",{type:"number",value:a.racialHD??n.racialHD,onChange:t=>u({...a,racialHD:parseInt(t.target.value)}),style:{width:"100%"}})),e.createElement("div",{style:{marginTop:8}},e.createElement("label",{style:{display:"block",fontWeight:600}},"HP"),e.createElement("input",{type:"number",value:a.hp??n.hp,onChange:t=>u({...a,hp:parseInt(t.target.value)}),style:{width:"100%"}}))),i===3&&e.createElement("div",null,e.createElement("label",{style:{display:"block",fontWeight:600}},"Fix Mode"),e.createElement("div",{style:{display:"flex",gap:8,marginTop:8}},e.createElement("button",{onClick:()=>b("enforce_cr"),style:{backgroundColor:l==="enforce_cr"?"#111827":"#f3f4f6",color:l==="enforce_cr"?"white":"black",padding:"6px 10px",border:"none"}},"Design (Enforce CR)"),e.createElement("button",{onClick:()=>b("fix_math"),style:{backgroundColor:l==="fix_math"?"#111827":"#f3f4f6",color:l==="fix_math"?"white":"black",padding:"6px 10px",border:"none"}},"Audit (Fix Math)")),e.createElement("div",{style:{marginTop:12}},e.createElement("button",{onClick:()=>{navigator.clipboard.writeText(f(g))},style:{padding:"6px 10px"}},"Copy Fixed Block"))),e.createElement("div",{style:{marginTop:12,display:"flex",gap:8}},e.createElement("button",{disabled:i===1,onClick:()=>y(t=>Math.max(1,t-1))},"Back"),e.createElement("button",{onClick:()=>y(t=>Math.min(3,t+1))},i===3?"Finish":"Next"))),e.createElement("div",{style:{flex:1,paddingLeft:12}},e.createElement("h4",null,"Raw Preview"),e.createElement("pre",{style:{background:"#f9fafb",padding:10,borderRadius:6}},f(n)),e.createElement("h4",{style:{marginTop:12}},"Auto-Fixed Preview"),e.createElement("pre",{style:{background:"#f9fafb",padding:10,borderRadius:6}},f(g)),e.createElement("div",{style:{marginTop:12}},e.createElement("h4",null,"Validation"),e.createElement(z,{statBlock:c,validation:F,validationTarget:l==="enforce_cr"?"fixed":"raw"})))))};x.__docgenInfo={description:"",methods:[],displayName:"MonsterBuilderWizard"};const K={title:"Tools/Monster Builder Wizard",component:x,parameters:{layout:"padded"}},m={};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:"{}",...m.parameters?.docs?.source}}};const X=["Default"];export{m as Default,X as __namedExportsOrder,K as default};
