import{R as o}from"./iframe-CmztvOte.js";import"./preload-helper-PPVm8Dsz.js";const f=({statBlock:e,validation:s})=>{const t={PASS:"bg-green-100 text-green-800 border-green-200",FAIL:"bg-red-100 text-red-800 border-red-200",WARN:"bg-yellow-100 text-yellow-800 border-yellow-200"};return o.createElement("div",{className:"p-6 max-w-2xl mx-auto font-sans border rounded-lg shadow-sm bg-white"},o.createElement("div",{className:"flex justify-between items-start border-b pb-4 mb-4"},o.createElement("div",null,o.createElement("h2",{className:"text-2xl font-bold text-gray-900"},e.name),o.createElement("p",{className:"text-sm text-gray-500"},e.size," ",e.creature_type," â€¢ CR ",e.cr_text||e.cr)),o.createElement("span",{className:`px-4 py-1 rounded-full text-sm font-bold border ${t[s.status]}`},s.status)),o.createElement("div",{className:"space-y-3"},s.messages.length===0?o.createElement("p",{className:"text-gray-500 italic"},"No validation errors found."):s.messages.map((a,r)=>o.createElement("div",{key:r,className:`p-3 rounded border-l-4 ${a.severity==="error"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`},o.createElement("div",{className:"flex justify-between"},o.createElement("span",{className:"font-mono text-xs uppercase tracking-wider opacity-75"},a.rule_id),o.createElement("span",{className:"text-xs text-gray-500"},a.reference_doc)),o.createElement("p",{className:"mt-1 font-medium text-gray-800"},a.text)))))};f.__docgenInfo={description:"",methods:[],displayName:"ValidatorDisplay",props:{statBlock:{required:!0,tsType:{name:"PF1eStatBlock"},description:""},validation:{required:!0,tsType:{name:"ValidationResult"},description:""}}};function v(e){const s=[];if(!e)return s.push({severity:"error",category:"basics",message:"No stat block provided."}),{status:"FAIL",messages:s};const t=["name","cr","size","type"];for(const l of t)(e[l]===void 0||e[l]===null)&&s.push({severity:"warning",category:"basics",message:`Missing field: ${l}`});!e.classLevels&&!e.racialHD&&e.racial_hd_count===void 0&&s.push({severity:"info",category:"basics",message:"No class levels or racial HD provided; treating as simple monster."});const a=s.some(l=>l.severity==="error"),r=s.some(l=>l.severity==="warning");return a?{status:"FAIL",messages:s}:r?{status:"WARN",messages:s}:{status:"PASS",messages:s}}const d={basicNpc:{1:260,2:390,3:780,4:1650,5:2400,6:3450,7:4650,8:6e3,9:7800,10:10050,11:12750,12:16350,13:21e3,14:27e3,15:34800,16:45e3,17:58500,18:75e3,19:96e3,20:123e3},heroicNpc:{}},g={1:260,2:550,3:800,4:1150,5:1550,6:2e3,7:2600,8:3350,9:4250,10:5450,11:7e3,12:9e3,13:11600,14:15e3,15:19500,16:25e3,17:32e3,18:41e3,19:53e3,20:67e3},y=13,w=4;(function(){let s=0;for(let t=1;t<=20;t=t+1){const a=g[t];if(!a)continue;const r=a*y/w;s+=r,d.heroicNpc[t]=Math.round(s)}})();const h={"1/8":{slow:35,medium:50,fast:65},"1/6":{slow:45,medium:65,fast:80},"1/4":{slow:65,medium:85,fast:100},"1/3":{slow:90,medium:135,fast:170},"1/2":{slow:130,medium:190,fast:230},1:{slow:170,medium:260,fast:400},2:{slow:350,medium:550,fast:800},3:{slow:550,medium:800,fast:1200},4:{slow:750,medium:1150,fast:1700},5:{slow:1e3,medium:1550,fast:2300},6:{slow:1350,medium:2e3,fast:3e3},7:{slow:1750,medium:2600,fast:3900},8:{slow:2200,medium:3350,fast:5e3},9:{slow:2850,medium:4250,fast:6400},10:{slow:3650,medium:5450,fast:8200},11:{slow:4650,medium:7e3,fast:10500},12:{slow:6e3,medium:9e3,fast:13500},13:{slow:7750,medium:11600,fast:17500},14:{slow:1e4,medium:15e3,fast:22e3},15:{slow:13e3,medium:19500,fast:29e3},16:{slow:16500,medium:25e3,fast:38e3},17:{slow:22e3,medium:32e3,fast:48e3},18:{slow:28e3,medium:41e3,fast:62e3},19:{slow:35e3,medium:53e3,fast:79e3},20:{slow:45e3,medium:67e3,fast:1e5},21:{slow:58e3,medium:88e3,fast:13e4},22:{slow:75e3,medium:11e4,fast:17e4},23:{slow:98e3,medium:15e4,fast:22e4},24:{slow:13e4,medium:2e5,fast:29e4},25:{slow:17e4,medium:26e4,fast:38e4}};function _(e){const s=[];if(e.gearValue===void 0)return{valid:!0,messages:[{severity:"info",category:"economy",message:"No gear value provided; skipping economy validation."}]};const t=N(e),a=b(e,t);if(a===null)return s.push({severity:"warning",category:"economy",message:`Unable to determine expected wealth for ${t} tier.`}),{valid:!0,messages:s};const r=e.gearValue,c=(r-a)/a*100,m=15;Math.abs(c)<=m?s.push({severity:"info",category:"economy",message:`Wealth is on target for ${t} (${r} gp vs expected ${a} gp).`,expected:a,actual:r}):c>m?s.push({severity:"warning",category:"economy",message:`Over-geared: ${t} has ${r} gp, expected ~${a} gp (+${c.toFixed(1)}%).`,expected:a,actual:r}):s.push({severity:"warning",category:"economy",message:`Under-geared: ${t} has ${r} gp, expected ~${a} gp (${c.toFixed(1)}%).`,expected:a,actual:r});let n="PASS";return s.some(i=>i.severity==="error")?n="FAIL":s.some(i=>i.severity==="warning")&&(n="WARN"),{valid:Math.abs(c)<=m,messages:s,status:n}}function N(e){if(e.economicTier)return e.economicTier;const s=e.racialHD||0,t=e.classLevels||[],a=["Warrior","Expert","Commoner","Adept","Aristocrat"],l=t.filter(n=>!a.includes(n.className)).reduce((n,i)=>n+i.level,0),m=t.filter(n=>a.includes(n.className)).reduce((n,i)=>n+i.level,0);return l>=s&&l>0?"Heroic NPC":m>0?"Basic NPC":"Monster"}function b(e,s){if(s==="Heroic NPC"){const t=p(e);return t<1||t>20?null:d.heroicNpc[t]||null}if(s==="Basic NPC"){const t=p(e);return t<1||t>20?null:d.basicNpc[t]||null}if(s==="Monster"){const t=e.cr,a=h[t];if(!a)return null;let r=a.medium;return e.treasureType==="Double"?r*=2:e.treasureType==="Triple"?r*=3:e.treasureType==="Incidental"?r*=.5:e.treasureType==="None"&&(r=0),r}return null}function p(e){if(e.claimedEffectiveLevel!==void 0)return e.claimedEffectiveLevel;const s=e.racialHD||0,a=(e.classLevels||[]).reduce((r,l)=>r+l.level,0);return s+a}const A={title:"Pathfinder/Validator",component:f},x={name:"Rich Rookie",creature_type:"Humanoid",size:"Medium",cr:1,xp:400,total_wealth_gp:5e3,class_levels:[{class_name:"Fighter",level_count:1}],racial_hd_count:0,treasure_code:"NPC gear",ability_scores:{str:14,dex:12,con:14,int:10,wis:10,cha:8},feats:["Power Attack","Cleave","Weapon Focus (Longsword)"]},u={render:e=>{const s={...e.statBlock,gearValue:e.statBlock.gearValue||e.statBlock.total_wealth_gp||e.statBlock.total_wealth||e.statBlock.gear_value,classLevels:e.statBlock.classLevels||e.statBlock.class_levels||e.statBlock.class_levels_list,racialHD:e.statBlock.racialHD||e.statBlock.racial_hd_count},t=v(s),a=_(s),r={status:t.status==="FAIL"||a?.status==="FAIL"?"FAIL":t.status==="WARN"||a?.status==="WARN"?"WARN":"PASS",messages:[...t.messages||[],...a?.messages||[]]};return React.createElement(f,{statBlock:s,validation:r})},args:{statBlock:x,validation:{status:"PASS",messages:[]}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  render: args => {
    // Normalize alternate property names used in demo data so validators receive expected keys
    const normalized = {
      ...args.statBlock,
      gearValue: args.statBlock.gearValue || args.statBlock.total_wealth_gp || args.statBlock.total_wealth || args.statBlock.gear_value,
      classLevels: args.statBlock.classLevels || args.statBlock.class_levels || args.statBlock.class_levels_list,
      racialHD: args.statBlock.racialHD || args.statBlock.racial_hd_count
    } as unknown as PF1eStatBlock;
    const basics = validateBasics(normalized);
    const economy = validateEconomy(normalized as PF1eStatBlock) as any;
    const combinedResult = {
      status: basics.status === 'FAIL' || economy?.status === 'FAIL' ? 'FAIL' : basics.status === 'WARN' || economy?.status === 'WARN' ? 'WARN' : 'PASS',
      messages: [...(basics.messages || []), ...(economy?.messages || [])]
    } as any;
    return <ValidatorDisplay statBlock={normalized} validation={combinedResult} />;
  },
  args: {
    statBlock: OvergearedFighter,
    validation: {
      status: 'PASS',
      messages: []
    }
  }
}`,...u.parameters?.docs?.source}}};const P=["Full_Validation_Check"];export{u as Full_Validation_Check,P as __namedExportsOrder,A as default};
