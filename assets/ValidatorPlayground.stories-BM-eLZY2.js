import{r as x,R as r}from"./iframe-C8eKvDVR.js";import{s as ue,f as O}from"./pf1e-formatter-rxhD__3t.js";import{M as q,C as z,a as oe,S as ce,X as K}from"./pf1e-data-tables-BqrvN3By.js";import{v as ee,a as he}from"./validateEconomy-6D0WuLcc.js";import{v as te,g as ae,e as ge}from"./benchmarkUtils-sM6IKbW0.js";import{V as Se}from"./ValidatorDisplay-CmVZIhLt.js";import"./preload-helper-PPVm8Dsz.js";function be(o){return o.replace(/\*\*/g,"").replace(/\*/g,"").replace(/__/g,"").replace(/_/g,"").replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"').replace(/[\u2013\u2014]/g,"-").replace(/\u2212/g,"-").replace(/\u00A0/g," ").trim()}function ve(o){const a=be(o),t={name:a.split(`
`).map(n=>n.trim()).filter(Boolean)[0]||"Unnamed Creature",classLevels:[],feats:[],str:10,dex:10,con:10,int:10,wis:10,cha:10,hp:10,ac:10,fort:0,ref:0,will:0,bab:0,cr:"1",size:"Medium",type:"Humanoid"},s=a.match(/Melee\s+(.+?)(?=\n|Ranged|Space|Special|Str|Statistic)/i);s&&(t.melee_line="Melee "+s[1].trim());const g=a.match(/Ranged\s+(.+?)(?=\n|Space|Special|Str|Statistic)/i);g&&(t.ranged_line="Ranged "+g[1].trim());const v=a.match(/Speed\s+(.+?)(?=\n|Melee|Ranged|Space|Special|Str|Statistic)/i);v&&(t.speed_line="Speed "+v[1].trim());const y=a.match(/Special Attacks\s+(.+?)(?=\n|Str|Statistic|Spells)/i);y&&(t.special_attacks_line="Special Attacks "+y[1].trim());const f=a.match(/(?:Spells|Spell-Like).+?(?=STATISTICS|Str\s+\d)/s);f&&(t.spells_block=f[0].trim());const k=a.match(/SPECIAL ABILITIES(.+)$/s);k&&(t.special_abilities_block=`SPECIAL ABILITIES
`+k[1].trim());const u=a.match(/Skills\s+(.+?)(?=\n|Languages|SQ|Feats|Special|Gear|Treasure)/i);u&&(t.skills_line="Skills "+u[1].trim());const F=a.match(/Languages\s+(.+?)(?=\n|SQ|Feats|Special|Gear|Treasure)/i);F&&(t.languages_line="Languages "+F[1].trim());const w=a.match(/(?:Combat Gear|Other Gear|Equipment)\s+(.+?)(?=\n|Special|Treasure)/is);w&&(t.equipment_line="Equipment "+w[1].trim());const H=a.match(/(?:CR|Challenge Rating)\s*(\d+(?:[\/\.]\d+)?)/i);H&&(t.cr=H[1]);const M=a.match(/XP\s*([0-9,]+)/i);M&&(t.xp=parseInt(M[1].replace(/,/g,"")));const C=a.match(/(LG|NG|CG|LN|N|CN|LE|NE|CE)\s+(Fine|Diminutive|Tiny|Small|Medium|Large|Huge|Gargantuan|Colossal)\s+([a-zA-Z\-\s\(\)]+?)(?=\s*(?:Init|Senses|CR|Level|\d))/i);if(C){t.alignment=C[1],t.size=C[2];const n=C[3].trim();t.subtypes=n.split(/,\s*/).map(b=>b.trim()).filter(Boolean),/Fiend|Devil|Demon|Daemon|Angel|Archon|Azata|Chaos-Beast/i.test(n)?t.type="Outsider":/Dragon/i.test(n)?t.type="Dragon":/Undead/i.test(n)?t.type="Undead":/Beast/i.test(n)?t.type="Magical Beast":t.type=n.split(" ")[0]}const d=/(Barbarian|Bard|Cleric|Druid|Fighter|Monk|Paladin|Ranger|Rogue|Sorcerer|Wizard|Adept|Aristocrat|Commoner|Expert|Warrior)\s+(\d+)/gi;let h;for(;(h=d.exec(a))!==null;)t.classLevels?.push({className:h[1],level:parseInt(h[2])});const R=a.match(/AC\s*(\d+)/i);R&&(t.ac_claimed=parseInt(R[1]));const _=a.match(/touch\s*(\d+)/i);_&&(t.touch_ac_claimed=parseInt(_[1]));const A=a.match(/flat-?footed\s*(\d+)/i);A&&(t.flat_footed_ac_claimed=parseInt(A[1]));const D=a.match(/(?:hp|HP)\s*(\d+)\s*(?:\(([^)]+)\))?/);if(D&&(t.hp_claimed=parseInt(D[1]),t.hp=parseInt(D[1]),D[2])){const n=/(\d+)d/.exec(D[2]);n&&(t.racialHD=parseInt(n[1]))}const P=t.classLevels?.reduce((n,b)=>n+b.level,0)||0;t.racialHD===P&&P>0&&(t.racialHD=0);const B=a.match(/Fort\s*\+?(-?\d+),\s*Ref\s*\+?(-?\d+),\s*Will\s*\+?(-?\d+)/i);B&&(t.fort_save_claimed=parseInt(B[1]),t.ref_save_claimed=parseInt(B[2]),t.will_save_claimed=parseInt(B[3]));const I=a.match(/(?:Base Atk|Base Atk\.|Base Attack)\s*\+?(\d+)/i);I&&(t.bab_claimed=parseInt(I[1]));const l=a.match(/CMD\s*(\d+)/i);l&&(t.cmd_claimed=parseInt(l[1]));const i=(n,b)=>{const G=new RegExp(`${b}\\s*(\\d+|[\\u2013\\u2014\\-])`,"i"),T=n.match(G);if(!T)return 10;const E=T[1];return/\d/.test(E)?parseInt(E):0};t.str=i(a,"Str"),t.dex=i(a,"Dex"),t.con=i(a,"Con"),t.int=i(a,"Int"),t.wis=i(a,"Wis"),t.cha=i(a,"Cha"),t.ac_claimed&&(t.ac=t.ac_claimed),t.touch_ac_claimed&&(t.touch=t.touch_ac_claimed),t.flat_footed_ac_claimed&&(t.flatFooted=t.flat_footed_ac_claimed);const S=a.match(/Init\s*([+-]?\d+)/i);S&&(t.init_claimed=parseInt(S[1]));const m=a.match(/Perception\s*([+-]?\d+)/i);m&&(t.perception_claimed=parseInt(m[1]));const c=a.match(/Feats[:\s]+(.+?)(?=\n|Skills|Languages|SQ|Ecology|Special Abilities)/i);c&&(t.feats=c[1].split(/[,;]/).map(n=>n.trim()).filter(Boolean));const p=a.match(/Treasure\s+(.+?)(?:$|\n)/i);if(p){const n=p[1].toLowerCase();n.includes("npc gear")?t.treasureType="NPC Gear":(n.includes("standard"),t.treasureType="Standard")}return t}function xe(o,a="enforce_cr"){const e=JSON.parse(JSON.stringify(o)),t=[],s=(c,p,n,b)=>{p!=n&&t.push({feature:c,oldValue:p,newValue:n,reason:b})};if(a==="enforce_cr"){const c=q.find(p=>p.cr===e.cr);if(c){const n=(z[e.type]||{hitDieType:8}).hitDieType/2+.5,b=Math.floor(((e.con||10)-10)/2),G=Math.max(1,n+b),T=e.hp_claimed||e.hp;if(T>c.hp*1.5){const E=Math.max(1,Math.round(c.hp/G));if((e.classLevels||[]).length===0){const N=e.racialHD;e.racialHD=E;const W=Math.floor(e.racialHD*n)+e.racialHD*b;e.hp=W,e.hp_claimed=W,s("Hit Dice",N,E,`Reduced to match CR ${e.cr} Benchmark`),s("Hit Points",T,W,`Recalculated for ${E} HD`)}}}}let g=0;if(e.racialHD&&e.racialHD>0){const c=z[e.type];let p="medium";c&&(p=c.babProgression),p==="fast"?g+=e.racialHD:p==="medium"?g+=Math.floor(e.racialHD*.75):g+=Math.floor(e.racialHD*.5)}for(const c of e.classLevels||[]){const p=oe[c.className];p&&(p.babProgression==="fast"?g+=c.level:p.babProgression==="medium"?g+=Math.floor(c.level*.75):g+=Math.floor(c.level*.5))}(e.racialHD||0)===0&&(e.classLevels||[]).length===0&&(g=e.bab_claimed??e.bab??0);const v=e.bab_claimed??e.bab;g!==v&&(s("Base Attack Bonus",v,g,`Fixed based on ${e.racialHD||0} HD (${e.type}) + Class Levels`),e.bab=g,e.bab_claimed=g);const y=ce[e.size]||{acAttackMod:0,cmbCmdMod:0},f=Math.floor(((e.str??10)-10)/2),k=Math.floor(((e.dex??10)-10)/2),u=10+g+f+k+(y.cmbCmdMod||0),F=e.cmd_claimed??e.cmd;u!==F&&(s("CMD",F,u,`Recalculated: 10 + BAB(${g}) + Str(${f}) + Dex(${k}) + Size(${y.cmbCmdMod})`),e.cmd=u,e.cmd_claimed=u);const w=g+f+(y.cmbCmdMod||0),H=e.cmb;w!==H&&(s("CMB",H,w,`Recalculated: BAB(${g}) + Str(${f}) + Size(${y.cmbCmdMod})`),e.cmb=w);const M=(e.racialHD??0)+(e.classLevels||[]).reduce((c,p)=>c+(p.level||0),0),C=Math.floor(2+M/2),d=Math.floor(M/3),h=z[e.type]||{goodSaves:[]},R=(h.goodSaves?.includes("Fort")?C:d)+Math.floor(((e.con??10)-10)/2),_=(h.goodSaves?.includes("Ref")?C:d)+Math.floor(((e.dex??10)-10)/2),A=(h.goodSaves?.includes("Will")?C:d)+Math.floor(((e.wis??10)-10)/2),D=e.fort_save_claimed??e.fort;R!==D&&(s("Fort Save",D,R,`Recalculated for ${M} HD and con ${e.con}`),e.fort=R,e.fort_save_claimed=R);const P=e.ref_save_claimed??e.ref;_!==P&&(s("Ref Save",P,_,`Recalculated for ${M} HD and dex ${e.dex}`),e.ref=_,e.ref_save_claimed=_);const B=e.will_save_claimed??e.will;A!==B&&(s("Will Save",B,A,`Recalculated for ${M} HD and wis ${e.wis}`),e.will=A,e.will_save_claimed=A);const I=Math.floor(((e.dex??10)-10)/2),l=e.init_claimed??void 0;if(I!==l&&(s("Init",l,I,`Set to Dex modifier ${I}`),e.init_claimed=I),a==="fix_math"){const c=e.hp_claimed||e.hp;if(c>0){const p=q.find(n=>n.cr===e.cr);if(p&&c>p.hp*1.5){const n=q.find(b=>c>=b.hp*.85&&c<=b.hp*1.25);n&&(s("Challenge Rating",e.cr,n.cr,`Upgraded to match HP (${c})`),e.cr=n.cr,e.cr_text=n.cr)}}}let i=e.cr_text||e.cr.toString();if(i==="0.5"&&(i="1/2"),(i==="0.33"||i==="0.333")&&(i="1/3"),i==="0.25"&&(i="1/4"),(i==="0.16"||i==="0.166"||i==="0.167")&&(i="1/6"),i==="0.125"&&(i="1/8"),K[i]){const c=K[i];e.xp!==c&&(s("XP Award",e.xp,c,`Standardized for CR ${i}`),e.xp=c)}const S=e.ac_claimed||e.ac,m=10+k+y.acAttackMod;return S>m?e.ac=S:e.ac=Math.max(S,m),{block:e,fixes:t}}const ye=`New Creature
CR 1
XP 400
N Medium Humanoid
Init +0; Senses Perception +0
DEFENSE
AC 12, touch 11, flat-footed 12
hp 20 (2d8+4)
Fort +2, Ref +0, Will +0
OFFENSE
Speed 30 ft.
Melee unarmed +1 (1d4)
STATISTICS
Str 10, Dex 10, Con 14, Int 10, Wis 10, Cha 10
Base Atk +1; CMB +1; CMD 12
Feats Improved Initiative
Treasure Standard`,re=o=>{if(o==null)return;let a=typeof o=="number"?o.toString():String(o).trim();return a==="0.5"&&(a="1/2"),(a==="0.33"||a==="0.333")&&(a="1/3"),a==="0.25"&&(a="1/4"),(a==="0.16"||a==="0.166"||a==="0.167")&&(a="1/6"),a==="0.125"&&(a="1/8"),a},ne=o=>{if(!o)return 0;const a=o.racialHD??0,e=(o.classLevels||[]).reduce((t,s)=>t+(s.level||0),0);return a+e},$=o=>Math.floor(((o??10)-10)/2),Q=o=>{if(!o)return 0;let a=0;const e=o.racialHD??0;if(e>0){const s=z[o.type]?.babProgression??"medium";s==="fast"?a+=e:s==="medium"?a+=Math.floor(e*.75):a+=Math.floor(e*.5)}for(const t of o.classLevels||[]){const s=oe[t.className];s&&(s.babProgression==="fast"?a+=t.level:s.babProgression==="medium"?a+=Math.floor(t.level*.75):a+=Math.floor(t.level*.5))}return e===0&&(o.classLevels||[]).length===0&&(a=o.bab??0),a},j=o=>{if(!o)return null;const a=Q(o),e=ce[o.size]?.cmbCmdMod??0;return 10+a+$(o.str)+$(o.dex)+e},se=o=>{if(!o)return null;const a=Math.max(1,ne(o)),e=Math.floor(2+a/2),t=Math.floor(a/3),s=z[o.type]||{goodSaves:[]};return{fort:(s.goodSaves?.includes("Fort")?e:t)+$(o.con),ref:(s.goodSaves?.includes("Ref")?e:t)+$(o.dex),will:(s.goodSaves?.includes("Will")?e:t)+$(o.wis),totalHD:a}},ie={ok:{bg:"#ecfdf5",color:"#047857",label:"On target"},high:{bg:"#fef3c7",color:"#b45309",label:"High / Sponge"},low:{bg:"#fee2e2",color:"#b91c1c",label:"Low / Glass Jaw"}},le=(o,a)=>{if(o==null||a===void 0||a===null||a===0)return"ok";const e=(o-a)/a;return e>.2?"high":e<-.2?"low":"ok"},Me=({initialText:o=ye,initialFixMode:a="enforce_cr"})=>{const[e,t]=x.useState(o),[s,g]=x.useState(null),[v,y]=x.useState(1),[f,k]=x.useState(a),[u,F]=x.useState(null),[w,H]=x.useState([]),[M,C]=x.useState(null),d=f==="enforce_cr"?u:s;x.useEffect(()=>{if(!e.trim()){g(null),F(null),C(null),H([]);return}try{const l=ve(e);g(l);const i=parseInt(l.cr,10);y(isNaN(i)?1:i)}catch(l){console.error(l)}},[e]),x.useEffect(()=>{if(!s)return;let l=JSON.parse(JSON.stringify(s));const i=[],S=s.cr,m=v.toString();if(S!==m){const L=K[m];if(L){const{block:me,changes:fe}=ue(l,L);l=me,fe.forEach(pe=>i.push({feature:"Creature Scaler",oldValue:S,newValue:m,reason:pe}))}}const{block:c,fixes:p}=xe(l,f);F(c),H([...i,...p]);const b=ee(s).messages.filter(L=>L.category==="structure"),T=te(s).messages.filter(L=>L.severity!=="note"),E=f==="enforce_cr"?c:s;let N={status:"PASS",messages:[]},W={status:"PASS",messages:[]},V={status:"PASS",messages:[]};E&&(N=ee(E),W=te(E),V=he(E));const de=[...b,...T,...N.messages||[],...W.messages||[],...V.messages||[]],Z=b.some(L=>L.severity==="critical"),Y=N.status==="FAIL"||V.status==="FAIL";C({valid:!Z&&!Y,status:Z||Y?"FAIL":N.status==="WARN"||W.status==="WARN"||V.status==="WARN"?"WARN":"PASS",messages:de})},[s,v,f]);const h=x.useMemo(()=>{if(!s)return null;const l=s.cr_text??s.cr??v,i=re(l)??re(v),S=ae(l),m=ge(l),c=ne(s);return{crLabel:s.cr,totalHD:c,hdEstimate:m,hdMax:m?m*2:null,canonicalXP:i?K[i]:void 0,hpBenchmark:S?.hp,hpActual:s.hp_claimed??s.hp}},[s,v]),R=x.useMemo(()=>{if(!d)return[];const l=d.cr_text??d.cr??v,i=ae(l);if(!i)return[];const S=j(d);return[{key:"hp",label:"HP Budget",actual:d.hp_claimed??d.hp,expected:i.hp,helper:"Keep HP within Â±20% of CR baseline."},{key:"ac",label:"Armor Class",actual:d.ac_claimed??d.ac,expected:i.ac,helper:"AC swings over 4 points skew encounter math."},{key:"cmd",label:"CMD Health",actual:d.cmd_claimed??d.cmd??null,expected:S,helper:"Legal CMD uses BAB + Str + Dex + size."}].filter(m=>m.actual!==void 0&&m.actual!==null&&m.expected!==void 0&&m.expected!==null).map(m=>({...m,status:le(m.actual,m.expected)}))},[d,v]),_=x.useMemo(()=>se(d),[d]),A=x.useMemo(()=>j(d),[d]),D=x.useMemo(()=>Q(d),[d]),P=()=>{u&&t(O(u))},B=()=>{if(!s)return;const l=Q(s),i=se(s),S=j(s),m={...s,bab:l??s.bab,bab_claimed:l??s.bab_claimed,fort:i?.fort??s.fort,ref:i?.ref??s.ref,will:i?.will??s.will,fort_save_claimed:i?.fort??s.fort_save_claimed,ref_save_claimed:i?.ref??s.ref_save_claimed,will_save_claimed:i?.will??s.will_save_claimed,cmd:S??s.cmd,cmd_claimed:S??s.cmd_claimed};t(O(m))},I=l=>{if(!d||!_)return null;const i=d[`${l.toLowerCase()}`],S=_[l.toLowerCase()],m=le(i,S),c=ie[m];return r.createElement("div",{key:l,style:{borderRadius:8,padding:"0.5rem 0.75rem",background:c.bg,border:`1px solid ${c.color}33`,display:"flex",flexDirection:"column",gap:2}},r.createElement("div",{style:{fontSize:12,fontWeight:700,color:c.color}},l),r.createElement("div",{style:{fontSize:18,fontWeight:700}},typeof i=="number"?`+${i}`:"â€”"),r.createElement("div",{style:{fontSize:11,color:"#475569"}},"Legal: ",S!==void 0?`+${S}`:"â€”"))};return r.createElement("div",{className:"validator-playground"},r.createElement("div",{className:"validator-column"},r.createElement("h2",{className:"validator-header"},"1. Raw Stat Block"),r.createElement("textarea",{className:"validator-textarea",value:e,onChange:l=>t(l.target.value),spellCheck:!1,placeholder:"Paste stat block here..."})),r.createElement("div",{className:"validator-scroll-area"},r.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"}},r.createElement("h3",{className:"validator-header"},"2. Rules Lawyer Audit (v3.0)"),r.createElement("div",{style:{fontSize:"0.85rem",color:"#6b7280"}},"Validating: ",f==="enforce_cr"?"Auto-Fixed Version (Design Mode)":"Raw Input (Audit Mode)"),h&&r.createElement("div",{style:{border:"1px solid #c7d2fe",background:"#eef2ff",borderRadius:12,padding:"0.75rem",display:"flex",flexDirection:"column",gap:6}},r.createElement("div",{style:{fontWeight:700,color:"#312e81"}},"HD / CR Guardrail"),r.createElement("div",{style:{fontSize:13,color:"#312e81"}},"Declared CR ",h.crLabel," expects roughly ",h.hdEstimate??"â€”"," HD (",h.hpBenchmark??"â€”"," hp). This block lists ",h.totalHD," HD."),h.hdMax!==null&&h.hdMax!==void 0&&h.totalHD>h.hdMax&&r.createElement("div",{style:{fontSize:12,color:"#b45309",fontWeight:600}},"Warning: Structural errors fire above ",h.hdMax," HD for this CR."),r.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap"}},h.canonicalXP&&r.createElement("span",{style:{padding:"4px 10px",borderRadius:999,background:"#312e81",color:"white",fontSize:12,fontWeight:600}},"XP locked: ",h.canonicalXP),typeof h.hpActual=="number"&&r.createElement("span",{style:{fontSize:12,color:"#475569"}},"Claimed HP: ",h.hpActual))),R.length>0&&r.createElement("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"}},R.map(l=>{const i=ie[l.status];return r.createElement("div",{key:l.key,style:{borderRadius:12,padding:"0.75rem",border:`1px solid ${i.color}33`,background:i.bg,boxShadow:"0 4px 12px rgba(15,23,42,0.05)"}},r.createElement("div",{style:{fontSize:11,fontWeight:700,color:i.color,textTransform:"uppercase"}},l.label),r.createElement("div",{style:{fontSize:26,fontWeight:700,color:"#0f172a",lineHeight:1.2}},l.actual),r.createElement("div",{style:{fontSize:12,color:"#475569"}},"Benchmark: ",l.expected??"â€”"),r.createElement("div",{style:{marginTop:6,fontSize:12,fontWeight:600,color:i.color}},i.label),r.createElement("div",{style:{fontSize:11,color:"#475569",marginTop:4}},l.helper))})),d&&r.createElement("div",{style:{border:"1px solid #e2e8f0",borderRadius:12,padding:"0.75rem",background:"#f8fafc",display:"flex",flexDirection:"column",gap:10}},r.createElement("div",{style:{fontWeight:700,color:"#0f172a"}},"Chassis Snapshot"),r.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:10}},r.createElement("div",{style:{minWidth:120}},r.createElement("div",{style:{fontSize:11,color:"#475569"}},"BAB"),r.createElement("div",{style:{fontSize:20,fontWeight:700}},"+",d.bab," ",r.createElement("span",{style:{fontSize:12,color:"#94a3b8"}},"legal +",D))),r.createElement("div",{style:{minWidth:120}},r.createElement("div",{style:{fontSize:11,color:"#475569"}},"CMD"),r.createElement("div",{style:{fontSize:20,fontWeight:700}},d.cmd??"â€”",r.createElement("span",{style:{fontSize:12,color:"#94a3b8",marginLeft:4}},"legal ",A??"â€”")))),_&&r.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap"}},["Fort","Ref","Will"].map(l=>I(l))),r.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap"}},r.createElement("button",{type:"button",onClick:B,style:{padding:"6px 12px",borderRadius:8,border:"1px solid #a5b4fc",background:"#eef2ff",color:"#4338ca",fontWeight:600,cursor:"pointer"}},"Recalculate CMD & Saves"),r.createElement("button",{type:"button",onClick:P,disabled:!u,style:{padding:"6px 12px",borderRadius:8,border:"1px solid #22c55e",background:"#dcfce7",color:"#15803d",fontWeight:600,cursor:u?"pointer":"not-allowed",opacity:u?1:.6}},"Overwrite Raw with Auto-Fix"))),s&&M&&r.createElement(Se,{statBlock:f==="enforce_cr"?u:s,validation:M,validationTarget:f==="enforce_cr"?"fixed":"raw"})),w.length>0&&r.createElement("div",{className:"fix-report"},r.createElement("h4",{className:"fix-report-header"},"ðŸ› ï¸ Auto-Fixes Applied (",f==="fix_math"?"Audit Mode":"Design Mode",")"),r.createElement("ul",{className:"fix-list"},w.map((l,i)=>r.createElement("li",{key:`${l.feature}-${i}`,className:"fix-item"},r.createElement("div",{style:{fontWeight:600}},l.feature),r.createElement("div",{className:"fix-change-row"},r.createElement("span",{className:"fix-old"},String(l.oldValue)),r.createElement("span",null,"â†’"),r.createElement("span",{className:"fix-new"},String(l.newValue))),r.createElement("div",{className:"fix-reason"},l.reason)))))),r.createElement("div",{className:"validator-column"},r.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"}},r.createElement("h2",{className:"validator-header"},"3. Auto-Fixed Version"),r.createElement("div",{className:"mode-toggle",style:{display:"flex",alignItems:"center",gap:"1rem"}},r.createElement("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#f3f4f6",padding:"0.25rem 0.5rem",borderRadius:"0.25rem"}},r.createElement("label",{htmlFor:"cr-slider",style:{fontSize:"0.75rem",fontWeight:"bold",color:"#4b5563"}},"Target CR: ",v),r.createElement("input",{id:"cr-slider",type:"range",min:"1",max:"20",value:v,onChange:l=>y(parseInt(l.target.value,10)),style:{width:100}})),r.createElement("div",{style:{display:"flex",backgroundColor:"#e5e7eb",borderRadius:"0.25rem",padding:"0.25rem"}},r.createElement("button",{onClick:()=>k("enforce_cr"),style:{backgroundColor:f==="enforce_cr"?"white":"transparent",color:f==="enforce_cr"?"#1d4ed8":"#4b5563",fontWeight:f==="enforce_cr"?"bold":"normal",boxShadow:f==="enforce_cr"?"0 1px 2px 0 rgba(0, 0, 0, 0.05)":"none",padding:"0.25rem 0.75rem",fontSize:"0.75rem",borderRadius:"0.25rem",border:"none",cursor:"pointer"},title:"Keep CR, downgrade stats"},"Design Mode"),r.createElement("button",{onClick:()=>k("fix_math"),style:{backgroundColor:f==="fix_math"?"white":"transparent",color:f==="fix_math"?"#1d4ed8":"#4b5563",fontWeight:f==="fix_math"?"bold":"normal",boxShadow:f==="fix_math"?"0 1px 2px 0 rgba(0, 0, 0, 0.05)":"none",padding:"0.25rem 0.75rem",fontSize:"0.75rem",borderRadius:"0.25rem",border:"none",cursor:"pointer"},title:"Keep stats, update CR label"},"Audit Mode")))),r.createElement("div",{className:"output-area"},u?r.createElement("pre",{className:"output-pre"},O(u)):r.createElement("p",{style:{color:"#9ca3af",fontSize:"0.875rem",fontStyle:"italic"}},"Fixes will appear here.")),r.createElement("button",{onClick:()=>u&&navigator.clipboard.writeText(O(u)),className:"copy-btn",disabled:!u,style:{opacity:u?1:.6,cursor:u?"pointer":"not-allowed"}},"ðŸ“‹ Copy to Clipboard")))},Ce=`Rat King Prime
CR 1
XP 400
CE Small Outsider
Init +6; Senses darkvision 60 ft.; Perception +9
DEFENSE
AC 20, touch 15, flat-footed 16 (+1 size, +4 Dex, +5 natural)
hp 42 (6d8+12)
Fort +9, Ref +9, Will +6
OFFENSE
Speed 30 ft., climb 20 ft.
Melee bite +12 (1d4+6 plus disease)
STATISTICS
Str 18, Dex 18, Con 14, Int 12, Wis 12, Cha 8
Base Atk +6; CMB +9; CMD 24
Feats Weapon Finesse, Lightning Reflexes, Toughness
Skills Acrobatics +14, Stealth +15, Perception +9
Languages Abyssal
Special Abilities
Disease (Bite) Filth Fever (DC 14)`,_e=`Glass Scout
CR 4
XP 1,200
N Medium Humanoid (human)
Init +1; Senses Perception +4
DEFENSE
AC 14, touch 11, flat-footed 13 (+3 armor, +1 Dex)
hp 22 (3d8+9)
Fort +2, Ref +2, Will +4
OFFENSE
Speed 30 ft.
Melee longsword +4 (1d8+1)
STATISTICS
Str 12, Dex 12, Con 12, Int 10, Wis 14, Cha 8
Base Atk +2; CMB +3; CMD 14
Feats Alertness, Iron Will
Skills Perception +4, Survival +8
Languages Common`,Ie={title:"Validators/Rules Lawyer Workbench",component:Me,parameters:{layout:"fullscreen",controls:{exclude:["initialText"]}},args:{initialFixMode:"enforce_cr"}},X={name:"Design Mode (HD/CR Guardrails)",args:{initialText:Ce,initialFixMode:"enforce_cr"},parameters:{docs:{description:{story:"Demonstrates the HD/CR guardrail banner, benchmark tiles, and quick chassis helpers when forcing a CR 1 overbuilt stat block back into line."}}}},U={name:"Audit Mode (Benchmark Warnings)",args:{initialText:_e,initialFixMode:"fix_math"},parameters:{docs:{description:{story:"Shows the Rules Lawyer in Audit Mode, highlighting glass-jaw HP/AC deviations and letting reviewers compare raw inputs against legal chassis targets."}}}},J={name:"Sandbox"};X.parameters={...X.parameters,docs:{...X.parameters?.docs,source:{originalSource:`{
  name: 'Design Mode (HD/CR Guardrails)',
  args: {
    initialText: OVERBUILT_SAMPLE,
    initialFixMode: 'enforce_cr'
  },
  parameters: {
    docs: {
      description: {
        story: 'Demonstrates the HD/CR guardrail banner, benchmark tiles, and quick chassis helpers when forcing a CR 1 overbuilt stat block back into line.'
      }
    }
  }
}`,...X.parameters?.docs?.source}}};U.parameters={...U.parameters,docs:{...U.parameters?.docs,source:{originalSource:`{
  name: 'Audit Mode (Benchmark Warnings)',
  args: {
    initialText: UNDERBUILT_SAMPLE,
    initialFixMode: 'fix_math'
  },
  parameters: {
    docs: {
      description: {
        story: 'Shows the Rules Lawyer in Audit Mode, highlighting glass-jaw HP/AC deviations and letting reviewers compare raw inputs against legal chassis targets.'
      }
    }
  }
}`,...U.parameters?.docs?.source}}};J.parameters={...J.parameters,docs:{...J.parameters?.docs,source:{originalSource:`{
  name: 'Sandbox'
}`,...J.parameters?.docs?.source}}};const Fe=["BenchmarkGuardrails","AuditModeGlassJaw","InteractiveWorkbench"];export{U as AuditModeGlassJaw,X as BenchmarkGuardrails,J as InteractiveWorkbench,Fe as __namedExportsOrder,Ie as default};
