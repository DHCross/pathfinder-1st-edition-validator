import{R as r}from"./iframe-ClBMF-cw.js";import"./preload-helper-PPVm8Dsz.js";const b=({statBlock:e,validation:s})=>{const t={PASS:"bg-green-100 text-green-800 border-green-200",FAIL:"bg-red-100 text-red-800 border-red-200",WARN:"bg-yellow-100 text-yellow-800 border-yellow-200"};return r.createElement("div",{className:"p-6 max-w-2xl mx-auto font-sans border rounded-lg shadow-sm bg-white"},r.createElement("div",{className:"flex justify-between items-start border-b pb-4 mb-4"},r.createElement("div",null,r.createElement("h2",{className:"text-2xl font-bold text-gray-900"},e.name),r.createElement("p",{className:"text-sm text-gray-500"},e.size," ",e.creature_type," â€¢ CR ",e.cr_text||e.cr)),r.createElement("span",{className:`px-4 py-1 rounded-full text-sm font-bold border ${t[s.status]}`},s.status)),r.createElement("div",{className:"space-y-3"},s.messages.length===0?r.createElement("p",{className:"text-gray-500 italic"},"No validation errors found."):s.messages.map((a,o)=>r.createElement("div",{key:o,className:`p-3 rounded border-l-4 ${a.severity==="error"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`},r.createElement("div",{className:"flex justify-between"},r.createElement("span",{className:"font-mono text-xs uppercase tracking-wider opacity-75"},a.rule_id),r.createElement("span",{className:"text-xs text-gray-500"},a.reference_doc)),r.createElement("p",{className:"mt-1 font-medium text-gray-800"},a.text)))))};b.__docgenInfo={description:"",methods:[],displayName:"ValidatorDisplay",props:{statBlock:{required:!0,tsType:{name:"PF1eStatBlock"},description:""},validation:{required:!0,tsType:{name:"ValidationResult"},description:""}}};const E={Barbarian:{hitDieType:12,babProgression:"fast",goodSaves:["Fort"],skillRanksPerLevel:4,crMod:-1},Bard:{hitDieType:8,babProgression:"medium",goodSaves:["Ref","Will"],skillRanksPerLevel:6,crMod:-1},Cleric:{hitDieType:8,babProgression:"medium",goodSaves:["Fort","Will"],skillRanksPerLevel:2,crMod:-1},Druid:{hitDieType:8,babProgression:"medium",goodSaves:["Fort","Will"],skillRanksPerLevel:4,crMod:-1},Fighter:{hitDieType:10,babProgression:"fast",goodSaves:["Fort"],skillRanksPerLevel:2,crMod:-1},Monk:{hitDieType:8,babProgression:"medium",goodSaves:["Fort","Ref","Will"],skillRanksPerLevel:4,crMod:-1},Paladin:{hitDieType:10,babProgression:"fast",goodSaves:["Fort","Will"],skillRanksPerLevel:2,crMod:-1},Ranger:{hitDieType:10,babProgression:"fast",goodSaves:["Fort","Ref"],skillRanksPerLevel:6,crMod:-1},Rogue:{hitDieType:8,babProgression:"medium",goodSaves:["Ref"],skillRanksPerLevel:8,crMod:-1},Sorcerer:{hitDieType:6,babProgression:"slow",goodSaves:["Will"],skillRanksPerLevel:2,crMod:-1},Wizard:{hitDieType:6,babProgression:"slow",goodSaves:["Will"],skillRanksPerLevel:2,crMod:-1},Warrior:{hitDieType:10,babProgression:"fast",goodSaves:["Fort"],skillRanksPerLevel:2,crMod:-2},Expert:{hitDieType:8,babProgression:"medium",goodSaves:["Ref","Will"],skillRanksPerLevel:6,crMod:-2},Commoner:{hitDieType:6,babProgression:"slow",goodSaves:[],skillRanksPerLevel:2,crMod:-2},Adept:{hitDieType:6,babProgression:"slow",goodSaves:["Will"],skillRanksPerLevel:2,crMod:-2},Aristocrat:{hitDieType:8,babProgression:"medium",goodSaves:["Will"],skillRanksPerLevel:4,crMod:-2}},_={Fine:{acAttackMod:8,cmbCmdMod:-8,stealthMod:16},Diminutive:{acAttackMod:4,cmbCmdMod:-4,stealthMod:12},Tiny:{acAttackMod:2,cmbCmdMod:-2,stealthMod:8},Small:{acAttackMod:1,cmbCmdMod:-1,stealthMod:4},Medium:{acAttackMod:0,cmbCmdMod:0,stealthMod:0},Large:{acAttackMod:-1,cmbCmdMod:1,stealthMod:-4},Huge:{acAttackMod:-2,cmbCmdMod:2,stealthMod:-8},Gargantuan:{acAttackMod:-4,cmbCmdMod:4,stealthMod:-12},Colossal:{acAttackMod:-8,cmbCmdMod:8,stealthMod:-16}},y={basicNpc:{1:260,2:390,3:780,4:1650,5:2400,6:3450,7:4650,8:6e3,9:7800,10:10050,11:12750,12:16350,13:21e3,14:27e3,15:34800,16:45e3,17:58500,18:75e3,19:96e3,20:123e3},heroicNpc:{}},T={1:260,2:550,3:800,4:1150,5:1550,6:2e3,7:2600,8:3350,9:4250,10:5450,11:7e3,12:9e3,13:11600,14:15e3,15:19500,16:25e3,17:32e3,18:41e3,19:53e3,20:67e3},D=13,F=4;(function(){let s=0;for(let t=1;t<=20;t=t+1){const a=T[t];if(!a)continue;const o=a*D/F;s+=o,y.heroicNpc[t]=Math.round(s)}})();const W={"1/2":[75,150],2:[300,600],3:[450],4:[600],5:[1600],6:[2400]},$={"1/8":{slow:35,medium:50,fast:65},"1/6":{slow:45,medium:65,fast:80},"1/4":{slow:65,medium:85,fast:100},"1/3":{slow:90,medium:135,fast:170},"1/2":{slow:130,medium:190,fast:230},1:{slow:170,medium:260,fast:400},2:{slow:350,medium:550,fast:800},3:{slow:550,medium:800,fast:1200},4:{slow:750,medium:1150,fast:1700},5:{slow:1e3,medium:1550,fast:2300},6:{slow:1350,medium:2e3,fast:3e3},7:{slow:1750,medium:2600,fast:3900},8:{slow:2200,medium:3350,fast:5e3},9:{slow:2850,medium:4250,fast:6400},10:{slow:3650,medium:5450,fast:8200},11:{slow:4650,medium:7e3,fast:10500},12:{slow:6e3,medium:9e3,fast:13500},13:{slow:7750,medium:11600,fast:17500},14:{slow:1e4,medium:15e3,fast:22e3},15:{slow:13e3,medium:19500,fast:29e3},16:{slow:16500,medium:25e3,fast:38e3},17:{slow:22e3,medium:32e3,fast:48e3},18:{slow:28e3,medium:41e3,fast:62e3},19:{slow:35e3,medium:53e3,fast:79e3},20:{slow:45e3,medium:67e3,fast:1e5},21:{slow:58e3,medium:88e3,fast:13e4},22:{slow:75e3,medium:11e4,fast:17e4},23:{slow:98e3,medium:15e4,fast:22e4},24:{slow:13e4,medium:2e5,fast:29e4},25:{slow:17e4,medium:26e4,fast:38e4}};function k(e){const s=[];if(!e)return s.push({severity:"error",category:"basics",message:"No stat block provided."}),{valid:!1,messages:s,status:"FAIL"};const t=e.classLevels||e.class_levels||[],a=e.racialHD??e.racial_hd_count??0;let o=0,l=0;a&&typeof a=="number"&&(o+=a);for(const d of t){const C=d.className||d.class_name,g=d.level??d.level_count??d.level_count??0,R=E[C];if(!R){s.push({severity:"warning",category:"basics",message:`Class '${C}' not found in data tables.`}),o+=g;continue}o+=g;const A=(R.babProgression||"").toString().toLowerCase();A==="fast"?l+=g:A==="medium"?l+=Math.floor(g*.75):l+=Math.floor(g*.5)}const n=_[e.size]||{cmbCmdMod:0},m=(n.cmbCmdMod??n.cmbCmdMod)||0,i=e.str??e.ability_scores?.str??10,c=e.dex??e.ability_scores?.dex??10,h=Math.floor((i-10)/2),M=Math.floor((c-10)/2),P=10+l+h+M+m,f=e.cmd??e.cmd_claimed??e.cmb??void 0;f!=null&&f!==P&&s.push({severity:"error",category:"basics",message:`Calculated CMD is ${P} (10 + BAB ${l} + Str ${h} + Dex ${M} + Size ${m}), but stat block claims ${f}.`});const w=Math.ceil(o/2),x=(e.feats||[]).length||0;x<w&&s.push({severity:"warning",category:"basics",message:`Creature has ${o} HD and should have at least ${w} feats, but only lists ${x}.`});const p=e.cr_text||e.cr,u=W[p];e.xp!==void 0&&u&&(Array.isArray(u)?u.includes(e.xp)||s.push({severity:"warning",category:"basics",message:`XP ${e.xp} does not match expected variants [${u.join(", ")}] for CR ${p}.`}):e.xp!==u&&s.push({severity:"warning",category:"basics",message:`XP ${e.xp} does not match expected value ${u} for CR ${p}.`}));const L=s.some(d=>d.severity==="error"),S=s.some(d=>d.severity==="warning");return{valid:!L,messages:s,status:L?"FAIL":S?"WARN":"PASS"}}function V(e){const s=[];if(e.gearValue===void 0)return{valid:!0,messages:[{severity:"info",category:"economy",message:"No gear value provided; skipping economy validation."}]};const t=H(e),a=I(e,t);if(a===null)return s.push({severity:"warning",category:"economy",message:`Unable to determine expected wealth for ${t} tier.`}),{valid:!0,messages:s};const o=e.gearValue,n=(o-a)/a*100,m=15;Math.abs(n)<=m?s.push({severity:"info",category:"economy",message:`Wealth is on target for ${t} (${o} gp vs expected ${a} gp).`,expected:a,actual:o}):n>m?s.push({severity:"warning",category:"economy",message:`Over-geared: ${t} has ${o} gp, expected ~${a} gp (+${n.toFixed(1)}%).`,expected:a,actual:o}):s.push({severity:"warning",category:"economy",message:`Under-geared: ${t} has ${o} gp, expected ~${a} gp (${n.toFixed(1)}%).`,expected:a,actual:o});let i="PASS";return s.some(c=>c.severity==="error")?i="FAIL":s.some(c=>c.severity==="warning")&&(i="WARN"),{valid:Math.abs(n)<=m,messages:s,status:i}}function H(e){if(e.economicTier)return e.economicTier;const s=e.racialHD||0,t=e.classLevels||[],a=["Warrior","Expert","Commoner","Adept","Aristocrat"],l=t.filter(i=>!a.includes(i.className)).reduce((i,c)=>i+c.level,0),m=t.filter(i=>a.includes(i.className)).reduce((i,c)=>i+c.level,0);return l>=s&&l>0?"Heroic NPC":m>0?"Basic NPC":"Monster"}function I(e,s){if(s==="Heroic NPC"){const t=N(e);return t<1||t>20?null:y.heroicNpc[t]||null}if(s==="Basic NPC"){const t=N(e);return t<1||t>20?null:y.basicNpc[t]||null}if(s==="Monster"){const t=e.cr,a=$[t];if(!a)return null;let o=a.medium;return e.treasureType==="Double"?o*=2:e.treasureType==="Triple"?o*=3:e.treasureType==="Incidental"?o*=.5:e.treasureType==="None"&&(o=0),o}return null}function N(e){if(e.claimedEffectiveLevel!==void 0)return e.claimedEffectiveLevel;const s=e.racialHD||0,a=(e.classLevels||[]).reduce((o,l)=>o+l.level,0);return s+a}const j={title:"Pathfinder/Validator",component:b},z={name:"Rich Rookie",creature_type:"Humanoid",size:"Medium",cr:1,xp:400,total_wealth_gp:5e3,class_levels:[{class_name:"Fighter",level_count:1}],racial_hd_count:0,treasure_code:"NPC gear",ability_scores:{str:14,dex:12,con:14,int:10,wis:10,cha:8},feats:["Power Attack","Cleave","Weapon Focus (Longsword)"]},v={render:e=>{const s=k(e.statBlock),t=V(e.statBlock),a={status:s.status==="FAIL"||t.status==="FAIL"?"FAIL":s.status==="WARN"||t.status==="WARN"?"WARN":"PASS",messages:[...s.messages,...t.messages]};return r.createElement(b,{statBlock:e.statBlock,validation:a})},args:{statBlock:z,validation:{status:"PASS",messages:[]}}};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  render: args => {
    const basics = validateBasics(args.statBlock);
    const economy = validateEconomy(args.statBlock);
    const combinedResult = {
      status: basics.status === 'FAIL' || economy.status === 'FAIL' ? 'FAIL' : basics.status === 'WARN' || economy.status === 'WARN' ? 'WARN' : 'PASS',
      messages: [...basics.messages, ...economy.messages]
    };
    return <ValidatorDisplay statBlock={args.statBlock} validation={combinedResult} />;
  },
  args: {
    statBlock: OvergearedFighter,
    validation: {
      status: 'PASS',
      messages: []
    }
  }
}`,...v.parameters?.docs?.source}}};const U=["Full_Validation_Check"];export{v as Full_Validation_Check,U as __namedExportsOrder,j as default};
