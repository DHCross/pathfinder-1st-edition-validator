import{R as l}from"./iframe-C6BCDv6O.js";import"./preload-helper-PPVm8Dsz.js";const h=({statBlock:e,validation:s})=>{const t={PASS:"bg-green-100 text-green-800 border-green-200",FAIL:"bg-red-100 text-red-800 border-red-200",WARN:"bg-yellow-100 text-yellow-800 border-yellow-200"};return l.createElement("div",{className:"p-6 max-w-2xl mx-auto font-sans border rounded-lg shadow-sm bg-white"},l.createElement("div",{className:"flex justify-between items-start border-b pb-4 mb-4"},l.createElement("div",null,l.createElement("h2",{className:"text-2xl font-bold text-gray-900"},e.name),l.createElement("p",{className:"text-sm text-gray-500"},e.size," ",e.creature_type," â€¢ CR ",e.cr_text||e.cr)),l.createElement("span",{className:`px-4 py-1 rounded-full text-sm font-bold border ${t[s.status]}`},s.status)),l.createElement("div",{className:"space-y-3"},s.messages.length===0?l.createElement("p",{className:"text-gray-500 italic"},"No validation errors found."):s.messages.map((a,o)=>l.createElement("div",{key:o,className:`p-3 rounded border-l-4 ${a.severity==="error"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`},l.createElement("div",{className:"flex justify-between"},l.createElement("span",{className:"font-mono text-xs uppercase tracking-wider opacity-75"},a.rule_id),l.createElement("span",{className:"text-xs text-gray-500"},a.reference_doc)),l.createElement("p",{className:"mt-1 font-medium text-gray-800"},a.text)))))};h.__docgenInfo={description:"",methods:[],displayName:"ValidatorDisplay",props:{statBlock:{required:!0,tsType:{name:"PF1eStatBlock"},description:""},validation:{required:!0,tsType:{name:"ValidationResult"},description:""}}};const S={Barbarian:{hitDieType:12,babProgression:"fast",goodSaves:["Fort"],skillRanksPerLevel:4,crMod:-1},Bard:{hitDieType:8,babProgression:"medium",goodSaves:["Ref","Will"],skillRanksPerLevel:6,crMod:-1},Cleric:{hitDieType:8,babProgression:"medium",goodSaves:["Fort","Will"],skillRanksPerLevel:2,crMod:-1},Druid:{hitDieType:8,babProgression:"medium",goodSaves:["Fort","Will"],skillRanksPerLevel:4,crMod:-1},Fighter:{hitDieType:10,babProgression:"fast",goodSaves:["Fort"],skillRanksPerLevel:2,crMod:-1},Monk:{hitDieType:8,babProgression:"medium",goodSaves:["Fort","Ref","Will"],skillRanksPerLevel:4,crMod:-1},Paladin:{hitDieType:10,babProgression:"fast",goodSaves:["Fort","Will"],skillRanksPerLevel:2,crMod:-1},Ranger:{hitDieType:10,babProgression:"fast",goodSaves:["Fort","Ref"],skillRanksPerLevel:6,crMod:-1},Rogue:{hitDieType:8,babProgression:"medium",goodSaves:["Ref"],skillRanksPerLevel:8,crMod:-1},Sorcerer:{hitDieType:6,babProgression:"slow",goodSaves:["Will"],skillRanksPerLevel:2,crMod:-1},Wizard:{hitDieType:6,babProgression:"slow",goodSaves:["Will"],skillRanksPerLevel:2,crMod:-1},Warrior:{hitDieType:10,babProgression:"fast",goodSaves:["Fort"],skillRanksPerLevel:2,crMod:-2},Expert:{hitDieType:8,babProgression:"medium",goodSaves:["Ref","Will"],skillRanksPerLevel:6,crMod:-2},Commoner:{hitDieType:6,babProgression:"slow",goodSaves:[],skillRanksPerLevel:2,crMod:-2},Adept:{hitDieType:6,babProgression:"slow",goodSaves:["Will"],skillRanksPerLevel:2,crMod:-2},Aristocrat:{hitDieType:8,babProgression:"medium",goodSaves:["Will"],skillRanksPerLevel:4,crMod:-2}},k={Fine:{acAttackMod:8,cmbCmdMod:-8,stealthMod:16},Diminutive:{acAttackMod:4,cmbCmdMod:-4,stealthMod:12},Tiny:{acAttackMod:2,cmbCmdMod:-2,stealthMod:8},Small:{acAttackMod:1,cmbCmdMod:-1,stealthMod:4},Medium:{acAttackMod:0,cmbCmdMod:0,stealthMod:0},Large:{acAttackMod:-1,cmbCmdMod:1,stealthMod:-4},Huge:{acAttackMod:-2,cmbCmdMod:2,stealthMod:-8},Gargantuan:{acAttackMod:-4,cmbCmdMod:4,stealthMod:-12},Colossal:{acAttackMod:-8,cmbCmdMod:8,stealthMod:-16}},y={basicNpc:{1:260,2:390,3:780,4:1650,5:2400,6:3450,7:4650,8:6e3,9:7800,10:10050,11:12750,12:16350,13:21e3,14:27e3,15:34800,16:45e3,17:58500,18:75e3,19:96e3,20:123e3},heroicNpc:{}},E={1:260,2:550,3:800,4:1150,5:1550,6:2e3,7:2600,8:3350,9:4250,10:5450,11:7e3,12:9e3,13:11600,14:15e3,15:19500,16:25e3,17:32e3,18:41e3,19:53e3,20:67e3},D=13,T=4;(function(){let s=0;for(let t=1;t<=20;t=t+1){const a=E[t];if(!a)continue;const o=a*D/T;s+=o,y.heroicNpc[t]=Math.round(s)}})();const F={"1/2":[75,150],2:[300,600],3:[450],4:[600],5:[1600],6:[2400]},$={"1/8":{slow:35,medium:50,fast:65},"1/6":{slow:45,medium:65,fast:80},"1/4":{slow:65,medium:85,fast:100},"1/3":{slow:90,medium:135,fast:170},"1/2":{slow:130,medium:190,fast:230},1:{slow:170,medium:260,fast:400},2:{slow:350,medium:550,fast:800},3:{slow:550,medium:800,fast:1200},4:{slow:750,medium:1150,fast:1700},5:{slow:1e3,medium:1550,fast:2300},6:{slow:1350,medium:2e3,fast:3e3},7:{slow:1750,medium:2600,fast:3900},8:{slow:2200,medium:3350,fast:5e3},9:{slow:2850,medium:4250,fast:6400},10:{slow:3650,medium:5450,fast:8200},11:{slow:4650,medium:7e3,fast:10500},12:{slow:6e3,medium:9e3,fast:13500},13:{slow:7750,medium:11600,fast:17500},14:{slow:1e4,medium:15e3,fast:22e3},15:{slow:13e3,medium:19500,fast:29e3},16:{slow:16500,medium:25e3,fast:38e3},17:{slow:22e3,medium:32e3,fast:48e3},18:{slow:28e3,medium:41e3,fast:62e3},19:{slow:35e3,medium:53e3,fast:79e3},20:{slow:45e3,medium:67e3,fast:1e5},21:{slow:58e3,medium:88e3,fast:13e4},22:{slow:75e3,medium:11e4,fast:17e4},23:{slow:98e3,medium:15e4,fast:22e4},24:{slow:13e4,medium:2e5,fast:29e4},25:{slow:17e4,medium:26e4,fast:38e4}};function W(e){const s=[];if(!e)return s.push({severity:"error",category:"basics",message:"No stat block provided."}),{valid:!1,messages:s,status:"FAIL"};const t=e.classLevels||e.class_levels||[],a=e.racialHD??e.racial_hd_count??0;let o=0,i=0;a&&typeof a=="number"&&(o+=a);for(const d of t){const _=d.className||d.class_name,v=d.level??d.level_count??d.level_count??0,C=S[_];if(!C){s.push({severity:"warning",category:"basics",message:`Class '${_}' not found in data tables.`}),o+=v;continue}o+=v;const R=(C.babProgression||"").toString().toLowerCase();R==="fast"?i+=v:R==="medium"?i+=Math.floor(v*.75):i+=Math.floor(v*.5)}const n=k[e.size]||{cmbCmdMod:0},m=(n.cmbCmdMod??n.cmbCmdMod)||0,r=e.str??e.ability_scores?.str??10,c=e.dex??e.ability_scores?.dex??10,b=Math.floor((r-10)/2),w=Math.floor((c-10)/2),M=10+i+b+w+m,g=e.cmd??e.cmd_claimed??e.cmb??void 0;g!=null&&g!==M&&s.push({severity:"error",category:"basics",message:`Calculated CMD is ${M} (10 + BAB ${i} + Str ${b} + Dex ${w} + Size ${m}), but stat block claims ${g}.`});const P=Math.ceil(o/2),x=(e.feats||[]).length||0;x<P&&s.push({severity:"warning",category:"basics",message:`Creature has ${o} HD and should have at least ${P} feats, but only lists ${x}.`});const p=e.cr_text||e.cr,u=F[p];e.xp!==void 0&&u&&(Array.isArray(u)?u.includes(e.xp)||s.push({severity:"warning",category:"basics",message:`XP ${e.xp} does not match expected variants [${u.join(", ")}] for CR ${p}.`}):e.xp!==u&&s.push({severity:"warning",category:"basics",message:`XP ${e.xp} does not match expected value ${u} for CR ${p}.`}));const L=s.some(d=>d.severity==="error"),N=s.some(d=>d.severity==="warning");return{valid:!L,messages:s,status:L?"FAIL":N?"WARN":"PASS"}}function B(e){const s=[];if(e.gearValue===void 0)return{valid:!0,messages:[{severity:"info",category:"economy",message:"No gear value provided; skipping economy validation."}]};const t=V(e),a=H(e,t);if(a===null)return s.push({severity:"warning",category:"economy",message:`Unable to determine expected wealth for ${t} tier.`}),{valid:!0,messages:s};const o=e.gearValue,n=(o-a)/a*100,m=15;Math.abs(n)<=m?s.push({severity:"info",category:"economy",message:`Wealth is on target for ${t} (${o} gp vs expected ${a} gp).`,expected:a,actual:o}):n>m?s.push({severity:"warning",category:"economy",message:`Over-geared: ${t} has ${o} gp, expected ~${a} gp (+${n.toFixed(1)}%).`,expected:a,actual:o}):s.push({severity:"warning",category:"economy",message:`Under-geared: ${t} has ${o} gp, expected ~${a} gp (${n.toFixed(1)}%).`,expected:a,actual:o});let r="PASS";return s.some(c=>c.severity==="error")?r="FAIL":s.some(c=>c.severity==="warning")&&(r="WARN"),{valid:Math.abs(n)<=m,messages:s,status:r}}function V(e){if(e.economicTier)return e.economicTier;const s=e.racialHD||0,t=e.classLevels||[],a=["Warrior","Expert","Commoner","Adept","Aristocrat"],i=t.filter(r=>!a.includes(r.className)).reduce((r,c)=>r+c.level,0),m=t.filter(r=>a.includes(r.className)).reduce((r,c)=>r+c.level,0);return i>=s&&i>0?"Heroic NPC":m>0?"Basic NPC":"Monster"}function H(e,s){if(s==="Heroic NPC"){const t=A(e);return t<1||t>20?null:y.heroicNpc[t]||null}if(s==="Basic NPC"){const t=A(e);return t<1||t>20?null:y.basicNpc[t]||null}if(s==="Monster"){const t=e.cr,a=$[t];if(!a)return null;let o=a.medium;return e.treasureType==="Double"?o*=2:e.treasureType==="Triple"?o*=3:e.treasureType==="Incidental"?o*=.5:e.treasureType==="None"&&(o=0),o}return null}function A(e){if(e.claimedEffectiveLevel!==void 0)return e.claimedEffectiveLevel;const s=e.racialHD||0,a=(e.classLevels||[]).reduce((o,i)=>o+i.level,0);return s+a}const j={title:"Pathfinder/Validator",component:h},z={name:"Rich Rookie",creature_type:"Humanoid",size:"Medium",cr:1,xp:400,total_wealth_gp:5e3,class_levels:[{class_name:"Fighter",level_count:1}],racial_hd_count:0,treasure_code:"NPC gear",ability_scores:{str:14,dex:12,con:14,int:10,wis:10,cha:8},feats:["Power Attack","Cleave","Weapon Focus (Longsword)"]},f={render:e=>{const s={...e.statBlock,gearValue:e.statBlock.gearValue||e.statBlock.total_wealth_gp||e.statBlock.total_wealth||e.statBlock.gear_value,classLevels:e.statBlock.classLevels||e.statBlock.class_levels||e.statBlock.class_levels_list,racialHD:e.statBlock.racialHD||e.statBlock.racial_hd_count},t=W(s),a=B(s),o={status:t.status==="FAIL"||a?.status==="FAIL"?"FAIL":t.status==="WARN"||a?.status==="WARN"?"WARN":"PASS",messages:[...t.messages||[],...a?.messages||[]]};return React.createElement(h,{statBlock:s,validation:o})},args:{statBlock:z,validation:{status:"PASS",messages:[]}}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  render: args => {
    // Normalize alternate property names used in demo data so validators receive expected keys
    const normalized = {
      ...args.statBlock,
      gearValue: args.statBlock.gearValue || args.statBlock.total_wealth_gp || args.statBlock.total_wealth || args.statBlock.gear_value,
      classLevels: args.statBlock.classLevels || args.statBlock.class_levels || args.statBlock.class_levels_list,
      racialHD: args.statBlock.racialHD || args.statBlock.racial_hd_count
    } as unknown as PF1eStatBlock;
    const basics = validateBasics(normalized);
    const economy = validateEconomy(normalized as PF1eStatBlock) as any;
    const combinedResult = {
      status: basics.status === 'FAIL' || economy?.status === 'FAIL' ? 'FAIL' : basics.status === 'WARN' || economy?.status === 'WARN' ? 'WARN' : 'PASS',
      messages: [...(basics.messages || []), ...(economy?.messages || [])]
    } as any;
    return <ValidatorDisplay statBlock={normalized} validation={combinedResult} />;
  },
  args: {
    statBlock: OvergearedFighter,
    validation: {
      status: 'PASS',
      messages: []
    }
  }
}`,...f.parameters?.docs?.source}}};const U=["Full_Validation_Check"];export{f as Full_Validation_Check,U as __namedExportsOrder,j as default};
