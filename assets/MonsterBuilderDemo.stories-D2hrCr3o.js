import{R as e,r as c}from"./iframe-BkJgIjVg.js";import{v as H,a as F}from"./validateEconomy-C9ua8KJL.js";import{v as N}from"./validateBenchmarks-v__Ado8Y.js";import{X as $}from"./pf1e-data-tables-BqrvN3By.js";import"./preload-helper-PPVm8Dsz.js";const D=["Monster","NPC","From-Scratch"],I=({name:r,targetCR:p,buildPath:a,onNameChange:o,onTargetCRChange:m,onBuildPathChange:f})=>e.createElement("section",{"aria-labelledby":"foundation-card-title",style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:16,padding:20,boxShadow:"inset 0 1px 0 #fff, 0 10px 30px #0f172a0d"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",marginBottom:12}},e.createElement("div",null,e.createElement("h2",{id:"foundation-card-title",style:{margin:"0 0 4px"}},"New Creature — Foundation"),e.createElement("p",{style:{margin:0,color:"#475569"}},"Choose your build path, calibrate CR, and give the creature a name.")),e.createElement("span",{style:{fontSize:12,fontWeight:700,color:"#312e81",textTransform:"uppercase",letterSpacing:.6}},"Start here")),e.createElement("div",{style:{display:"grid",gap:18}},e.createElement("label",{style:{fontWeight:700,display:"grid",gap:8}},"Creature Name",e.createElement("div",{style:{position:"relative"}},e.createElement("input",{value:r,onChange:l=>o(l.target.value),placeholder:"e.g., Embermaw Basilisk",style:{border:"1px solid #cbd5f5",borderRadius:12,padding:"12px 14px",fontSize:15,width:"100%",boxShadow:"0 2px 8px #1e3a8a18"}}),e.createElement("span",{style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",color:"#94a3b8",fontSize:12}},"Required"))),e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("div",{style:{fontWeight:700}},"Build Path"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:10}},D.map(l=>{const u=a===l,d=l==="Monster"?"Classic foes with bestiary math":l==="NPC"?"Humanoid + gear presets":"Blank canvas for homebrew";return e.createElement("button",{key:l,onClick:()=>f(l),type:"button",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"left",borderRadius:14,padding:"12px 14px",border:u?"2px solid #4338ca":"1px solid #cbd5f5",background:u?"#eef2ff":"#fff",color:u?"#1e1b4b":"#0f172a",fontWeight:600,cursor:"pointer",gap:4,boxShadow:u?"0 6px 16px #312e811c":"0 2px 6px #0f172a0d"}},e.createElement("span",null,l),e.createElement("span",{style:{fontSize:13,color:u?"#4c1d95":"#475569",fontWeight:500}},d))}))),e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.createElement("div",{style:{fontWeight:700}},"Target CR"),e.createElement("span",{style:{fontSize:13,color:"#475569"}},"CR ",p)),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:12}},e.createElement("span",{style:{fontSize:12,color:"#94a3b8"}},"1"),e.createElement("input",{type:"range",min:1,max:25,value:p,onChange:l=>m(parseInt(l.target.value,10)),style:{flexGrow:1}}),e.createElement("span",{style:{fontSize:12,color:"#94a3b8"}},"25")),e.createElement("div",{style:{fontSize:13,color:"#475569"}},"Calibrates HP, saves, attack bonuses, and loot tiers. Adjust to match your table’s target difficulty."))));function j(r){return`A ${r.role??"Villain"} motivated by ${r.motivation??"power"} wants to...`}const g=["Foundation","Mechanics","Narrative","Treasury"],_=r=>{const a={complete:{bg:"#e0e7ff",border:"#c7d2fe",color:"#312e81"},current:{bg:"#312e81",border:"#312e81",color:"#fff"},upcoming:{bg:"#f1f5f9",border:"#e2e8f0",color:"#64748b"}}[r];return{display:"flex",alignItems:"center",gap:12,padding:"10px 16px",borderRadius:999,border:`1px solid ${a.border}`,background:a.bg,color:a.color,minWidth:160,justifyContent:"flex-start",transition:"box-shadow 0.2s ease",boxShadow:r==="current"?"0 8px 20px #312e8118":"none",cursor:"pointer"}},q={critical:{icon:"⛔",color:"#b91c1c",bg:"#fef2f2",border:"#fecaca"},warning:{icon:"⚠️",color:"#b45309",bg:"#fffbeb",border:"#fcd34d66"},note:{icon:"ℹ️",color:"#2563eb",bg:"#eff6ff",border:"#bfdbfe"}},G={structure:{guidance:"CR and Hit Dice should stay in sync to avoid illegal math.",quickFixKey:"alignCrHd",quickFixLabel:"Match CR to HD",ctaLabel:"Open Foundation",ctaStep:0},basics:{guidance:"Review feats, XP, and chassis math inside Mechanics.",ctaLabel:"Go to Mechanics",ctaStep:1},benchmarks:{guidance:"Tweak CR or HD until HP/AC benchmarks land in the safe range.",ctaLabel:"Adjust Mechanics",ctaStep:1},economy:{guidance:"Adjust treasure tier or gear in the Treasury step.",ctaLabel:"Open Treasury",ctaStep:3}},O={name:"New Creature",targetCR:1,hd:1,role:"Villain",motivation:"power",treasureType:"Standard",buildPath:"Monster"},R=r=>({padding:"8px 14px",borderRadius:999,border:"1px solid",borderColor:r?"#4338ca":"#e5e7eb",background:r?"#eef2ff":"#fff",color:r?"#312e81":"#111827",fontWeight:r?700:600,cursor:"pointer",boxShadow:r?"0 1px 6px #4338ca1c":"0 1px 2px #0000000d"}),w=()=>{const[r,p]=c.useState(0),[a,o]=c.useState(O),m=c.useMemo(()=>({name:a.name||"Creature",cr:a.targetCR.toString(),xp:$[a.targetCR.toString()]||0,size:"Medium",type:"Animal",racialHD:a.hd,hp:Math.max(1,a.hd*8),hp_claimed:Math.max(1,a.hd*8),ac:10,ac_claimed:10,fort:0,ref:0,will:0,fort_save_claimed:0,ref_save_claimed:0,will_save_claimed:0,bab:0,bab_claimed:0,str:10,dex:10,con:10,int:10,wis:10,cha:10,feats:[],treasureType:a.treasureType}),[a.hd,a.name,a.targetCR,a.treasureType]),f=c.useMemo(()=>H(m),[m]),l=c.useMemo(()=>N(m),[m]),u=c.useMemo(()=>F(m),[m]),d=c.useMemo(()=>[...f.messages||[],...l.messages||[],...u.messages||[]],[f.messages,l.messages,u.messages]),E=c.useMemo(()=>d.filter(t=>t.severity!=="note"),[d]),h=c.useMemo(()=>d.some(t=>t.severity==="critical")?"FAIL":d.some(t=>t.severity==="warning")?"WARN":"PASS",[d]),y=f.messages.filter(t=>t.category==="structure"),W=d.filter(t=>["structure","benchmarks","basics"].includes(t.category)),v=d.filter(t=>t.category==="economy"),C=W.filter(t=>t.category!=="structure"&&t.severity!=="note"),T=t=>t==="FAIL"?"#b91c1c":t==="WARN"?"#b45309":"#15803d",x=c.useMemo(()=>r===0?a.name.trim().length>0:!0,[a.name,r]),M=r<g.length-1?`Next: ${g[r+1]}`:"Finish",B=r===0?"Back":`Back to ${g[r-1]}`,A=Math.max(1,a.hd*8),z=c.useMemo(()=>[{label:`CR ${a.targetCR}`,tone:"#312e81"},{label:a.buildPath,tone:"#0f766e"},{label:a.role||"Role TBD",tone:"#9a3412"},{label:a.treasureType||"Treasure TBD",tone:"#1d4ed8"},{label:`Rules: ${h}`,tone:T(h)}],[h,a.buildPath,a.role,a.targetCR,a.treasureType]),L=t=>{typeof t=="number"&&p(t)},P=t=>{switch(t){case"alignCrHd":o(n=>({...n,targetCR:Math.min(25,Math.max(1,n.hd))}));break}};return e.createElement("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc, #eef2ff)"}},e.createElement("div",{style:{maxWidth:1200,margin:"32px auto",padding:"0 16px 48px"}},e.createElement("div",{style:{background:"#fff",borderRadius:16,boxShadow:"0 12px 40px #0f172a1a",padding:24,border:"1px solid #e5e7eb"}},e.createElement("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12,marginBottom:12}},e.createElement("div",null,e.createElement("h1",{style:{margin:"0 0 4px"}},"Bestiary Architect"),e.createElement("div",{style:{color:"#6b7280"}},"Interactive builder for Pathfinder monsters and NPCs")),e.createElement("div",{style:{color:"#6b7280",fontWeight:600,fontSize:13}},"Step ",r+1," of ",g.length)),e.createElement("nav",{style:{marginBottom:20}},e.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:12}},g.map((t,n)=>{const i=n<r?"complete":n===r?"current":"upcoming";return e.createElement(e.Fragment,{key:t},e.createElement("button",{type:"button",onClick:()=>p(n),style:_(i),"aria-current":i==="current"?"step":void 0},e.createElement("span",{style:{width:32,height:32,borderRadius:"50%",border:i==="current"?"2px solid #fff":"2px solid transparent",background:i==="current"?"#4338ca":i==="complete"?"#c7d2fe":"#fff",color:i==="current"?"#fff":i==="complete"?"#312e81":"#94a3b8",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:700}},n+1),e.createElement("div",{style:{textAlign:"left"}},e.createElement("div",{style:{fontSize:12,fontWeight:600,lineHeight:1}},"Step ",n+1),e.createElement("div",{style:{fontSize:14,fontWeight:700}},t))),n<g.length-1&&e.createElement("div",{"aria-hidden":!0,style:{alignSelf:"center",flexGrow:1,minWidth:30,height:2,background:n<r?"#c7d2fe":"#e2e8f0"}}))}))),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.65fr) minmax(260px, 1fr)",gap:20,alignItems:"start"}},e.createElement("div",{style:{display:"grid",gap:16}},r===0&&e.createElement(e.Fragment,null,e.createElement(I,{name:a.name,targetCR:a.targetCR,buildPath:a.buildPath,onNameChange:t=>o(n=>({...n,name:t})),onTargetCRChange:t=>o(n=>({...n,targetCR:t})),onBuildPathChange:t=>o(n=>({...n,buildPath:t}))}),y.length>0&&e.createElement("div",{style:{border:"1px solid #f59e0b",background:"#fffbeb",borderRadius:10,padding:12}},e.createElement("div",{style:{fontWeight:700,color:"#b45309",marginBottom:6}},"Rules Lawyer: Structural mismatch"),e.createElement("ul",{style:{margin:0,paddingLeft:18,color:"#92400e"}},y.map((t,n)=>e.createElement("li",{key:n,style:{marginBottom:4}},t.message," ",t.expected?`(Expected: ${t.expected})`:""," ",t.actual?`(Actual: ${t.actual})`:""))),e.createElement("button",{onClick:()=>o(t=>({...t,targetCR:Math.min(25,t.hd)})),style:{marginTop:8,padding:"8px 12px",borderRadius:8,border:"1px solid #d97706",background:"#fef3c7",color:"#92400e",fontWeight:700,cursor:"pointer"}},"Adjust CR to HD (quick fix)"))),r===1&&e.createElement("div",{style:{display:"grid",gap:12}},e.createElement("h2",{style:{margin:0}},"Mechanics Engine"),e.createElement("p",{style:{margin:0,color:"#4b5563"}},"Tune hit dice and see quick math."),e.createElement("div",{style:{display:"grid",gap:10}},e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"Hit Dice",e.createElement("input",{type:"number",value:a.hd,min:1,max:20,onChange:t=>o(n=>({...n,hd:Number(t.target.value)})),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}})),e.createElement("div",{style:{color:"#111827",fontWeight:600}},"Calculated HP: ",e.createElement("span",{style:{color:"#4338ca"}},a.hd*8)," (placeholder)"),y.length>0&&e.createElement("div",{style:{border:"1px solid #f59e0b",background:"#fffbeb",borderRadius:10,padding:12}},e.createElement("div",{style:{fontWeight:700,color:"#b45309",marginBottom:6}},"Rules Lawyer: Structural mismatch"),e.createElement("ul",{style:{margin:0,paddingLeft:18,color:"#92400e"}},y.map((t,n)=>e.createElement("li",{key:n,style:{marginBottom:4}},t.message," ",t.expected?`(Expected: ${t.expected})`:""," ",t.actual?`(Actual: ${t.actual})`:""))),e.createElement("button",{onClick:()=>o(t=>({...t,targetCR:Math.min(25,t.hd)})),style:{marginTop:8,padding:"8px 12px",borderRadius:8,border:"1px solid #d97706",background:"#fef3c7",color:"#92400e",fontWeight:700,cursor:"pointer"}},"Adjust CR to HD (quick fix)")),C.length>0&&e.createElement("div",{style:{border:"1px solid #c084fc",background:"#f5f3ff",borderRadius:10,padding:12}},e.createElement("div",{style:{fontWeight:700,color:"#6b21a8",marginBottom:6}},"Rules Lawyer: Benchmarks"),e.createElement("ul",{style:{margin:0,paddingLeft:18,color:"#6b21a8"}},C.map((t,n)=>e.createElement("li",{key:n,style:{marginBottom:4}},t.message," ",t.expected?`(Expected: ${t.expected})`:""," ",t.actual?`(Actual: ${t.actual})`:"")))))),r===2&&e.createElement("div",{style:{display:"grid",gap:12}},e.createElement("h2",{style:{margin:0}},"Narrative Weaver"),e.createElement("p",{style:{margin:0,color:"#4b5563"}},"Give the creature purpose and tone."),e.createElement("label",{style:{display:"grid",gap:6,fontWeight:600}},"Role",e.createElement("input",{value:a.role,onChange:t=>o(n=>({...n,role:t.target.value})),placeholder:"Villain, Helper, Minion",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}})),e.createElement("label",{style:{display:"grid",gap:6,fontWeight:600}},"Motivation",e.createElement("input",{value:a.motivation,onChange:t=>o(n=>({...n,motivation:t.target.value})),placeholder:"power, revenge, devotion",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}})),e.createElement("div",{style:{background:"#f5f3ff",border:"1px solid #e0e7ff",padding:12,borderRadius:10,color:"#312e81"}},e.createElement("div",{style:{fontWeight:700,marginBottom:4}},"Prompt starter"),e.createElement("div",{style:{fontStyle:"italic",lineHeight:1.5}},j({role:["Villain","Helper","Minion"].includes(a.role)?a.role:void 0,motivation:a.motivation})))),r===3&&e.createElement("div",{style:{display:"grid",gap:12}},e.createElement("h2",{style:{margin:0}},"Treasury & Lair"),e.createElement("p",{style:{margin:0,color:"#4b5563"}},"Choose treasure and habitat hooks."),e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"Treasure Type",e.createElement("select",{value:a.treasureType,onChange:t=>o(n=>({...n,treasureType:t.target.value})),style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}},e.createElement("option",null,"Standard"),e.createElement("option",null,"Double"),e.createElement("option",null,"NPC Gear"),e.createElement("option",null,"None"))),e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"Environment",e.createElement("input",{placeholder:"e.g. temperate forest",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}})),e.createElement("label",{style:{fontWeight:600,display:"grid",gap:6}},"Organization",e.createElement("input",{placeholder:"solitary, pair, gang",style:{border:"1px solid #e5e7eb",borderRadius:8,padding:"10px 12px",fontSize:14}})),v.filter(t=>t.severity!=="note").length>0&&e.createElement("div",{style:{border:"1px solid #f59e0b",background:"#fffbeb",borderRadius:10,padding:12}},e.createElement("div",{style:{fontWeight:700,color:"#b45309",marginBottom:6}},"Rules Lawyer: Economy"),e.createElement("ul",{style:{margin:0,paddingLeft:18,color:"#92400e"}},v.filter(t=>t.severity!=="note").map((t,n)=>e.createElement("li",{key:n,style:{marginBottom:4}},t.message," ",t.expected?`(Expected: ${t.expected})`:""," ",t.actual?`(Actual: ${t.actual})`:"")))))),e.createElement("aside",{style:{background:"#f8fafc",border:"1px solid #e5e7eb",borderRadius:14,padding:16,boxShadow:"inset 0 1px 0 #fff"}},e.createElement("div",{style:{fontWeight:700,marginBottom:8}},"Creature Snapshot"),e.createElement("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:12}},z.map(t=>e.createElement("span",{key:t.label,style:{background:`${t.tone}14`,color:t.tone,border:`1px solid ${t.tone}33`,padding:"6px 10px",borderRadius:999,fontWeight:600,fontSize:12}},t.label))),e.createElement("div",{style:{display:"grid",gap:8,color:"#374151"}},e.createElement("div",null,e.createElement("strong",null,"Name:")," ",a.name),e.createElement("div",null,e.createElement("strong",null,"Role:")," ",a.role),e.createElement("div",null,e.createElement("strong",null,"Motivation:")," ",a.motivation),e.createElement("div",null,e.createElement("strong",null,"Treasure:")," ",a.treasureType)),e.createElement("div",{style:{marginTop:10,padding:"10px 12px",background:"#ffffff",border:"1px dashed #e5e7eb",borderRadius:10,display:"grid",gap:6,color:"#111827"}},e.createElement("div",{style:{fontWeight:700}},"Quick Stats"),e.createElement("div",{style:{display:"grid",gap:4,fontSize:13}},e.createElement("div",null,e.createElement("strong",null,"HD:")," ",a.hd,"d8"),e.createElement("div",null,e.createElement("strong",null,"HP (est):")," ",A),e.createElement("div",null,e.createElement("strong",null,"AC (placeholder):")," 10"),e.createElement("div",null,e.createElement("strong",null,"Saves (placeholder):")," Fort 0 / Ref 0 / Will 0"))),e.createElement("div",{style:{marginTop:14,paddingTop:12,borderTop:"1px solid #e5e7eb"}},e.createElement("div",{style:{fontWeight:700,marginBottom:6}},"Rules Lawyer Workbench"),e.createElement("div",{style:{fontSize:13,color:"#4b5563",marginBottom:8}},"Live checks from Basics, Benchmarks, and Economy."),E.length===0?e.createElement("div",{style:{color:"#15803d",fontWeight:600}},"No issues detected for current inputs."):e.createElement("div",{style:{display:"grid",gap:10}},E.map((t,n)=>{const i=q[t.severity],s=G[t.category],k=!!s?.quickFixKey,S=s?.ctaLabel&&typeof s.ctaStep=="number";return e.createElement("div",{key:`${t.category}-${n}`,style:{border:`1px solid ${i.border}`,background:i.bg,borderRadius:12,padding:12,color:i.color}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8}},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:10}},e.createElement("span",{"aria-hidden":!0,style:{fontSize:18}},i.icon),e.createElement("div",null,e.createElement("div",{style:{fontWeight:700,textTransform:"capitalize",color:"#111827"}},t.category),e.createElement("div",{style:{fontSize:12}},t.severity.toUpperCase())))),e.createElement("p",{style:{margin:"8px 0",color:"#111827"}},t.message),(t.expected!==void 0||t.actual!==void 0)&&e.createElement("div",{style:{display:"flex",gap:16,flexWrap:"wrap",fontSize:13,color:"#0f172a"}},t.expected!==void 0&&e.createElement("div",null,e.createElement("strong",null,"Expected:")," ",String(t.expected)),t.actual!==void 0&&e.createElement("div",null,e.createElement("strong",null,"Actual:")," ",String(t.actual))),s?.guidance&&e.createElement("div",{style:{marginTop:8,fontSize:13,color:"#475569"}},s.guidance),(k||S)&&e.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:10}},k&&s?.quickFixKey&&e.createElement("button",{type:"button",onClick:()=>P(s.quickFixKey),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #c4b5fd",background:"#ede9fe",color:"#4c1d95",fontWeight:600,cursor:"pointer"}},s.quickFixLabel||"Apply quick fix"),S&&e.createElement("button",{type:"button",onClick:()=>L(s.ctaStep),style:{padding:"6px 12px",borderRadius:8,border:"1px solid #cbd5f5",background:"#fff",color:"#1e1b4b",fontWeight:600,cursor:"pointer"}},s.ctaLabel)))}))))),e.createElement("footer",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:20}},e.createElement("div",{style:{color:"#475569",fontSize:13,fontWeight:500}},r===0&&"Complete the foundation card, then jump into Mechanics.",r===1&&"Dial in stats before moving to Narrative flair.",r===2&&"Capture story hooks, then define treasure.",r===3&&"Lock in loot or revisit earlier steps as needed."),e.createElement("div",{style:{display:"flex",gap:8}},e.createElement("button",{onClick:()=>p(t=>Math.max(0,t-1)),disabled:r===0,style:{...R(!1),opacity:r===0?.5:1,cursor:r===0?"not-allowed":"pointer"}},B),e.createElement("button",{onClick:()=>p(t=>Math.min(g.length-1,t+1)),disabled:!x,style:{...R(!0),background:"#312e81",color:"#fff",borderColor:"#312e81",opacity:x?1:.5,cursor:x?"pointer":"not-allowed"}},M))))))},Y={title:"Tools/Bestiary Architect",component:w,parameters:{layout:"padded"}},b={render:()=>e.createElement(w,null)};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  render: () => <BestiaryArchitectApp />
}`,...b.parameters?.docs?.source}}};const J=["Default"];export{b as Default,J as __namedExportsOrder,Y as default};
