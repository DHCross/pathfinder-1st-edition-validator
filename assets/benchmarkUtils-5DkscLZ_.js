import{M as y,C as v,S as C}from"./pf1e-data-tables-BqrvN3By.js";function x(e){const a=[],m=typeof e.cr=="number"?e.cr:parseInt(String(e.cr),10);if(isNaN(m))return{valid:!0,messages:a,status:"PASS"};const r=y.find(t=>t.cr===String(e.cr)||t.cr===e.cr_text);if(!r)return{valid:!0,messages:a,status:"PASS"};let f="ok",g="ok";const c=e.hp_claimed??e.hp??void 0,l=(e.racialHD||0)+((e.classLevels||[]).reduce?(e.classLevels||[]).reduce((t,s)=>t+(s.level||0),0):0);if(c!==void 0&&typeof c=="number"){const s=(v[e.type]||{hitDieType:8}).hitDieType||8,u=s/2+.5,p=Math.floor(((e.con||10)-10)/2),o=l>0?Math.floor(u*l)+p*l:void 0;if(o!==void 0){const d=Math.abs(c-o)/Math.max(1,l);d>2&&(a.push({severity:"warning",category:"benchmarks",message:`HP ${c} deviates from expected HP ${o} by more than ±2 per HD (calculated using ${l} HD and d${s}).`,expected:o,actual:c}),f=d>4?"low":"ok")}const i=c/r.hp;i<.7?f="low":i>1.5&&(f="high")}const n=e.ac_claimed??e.ac??void 0;if(n!==void 0&&typeof n=="number"){const t=n-r.ac;t<-4?(g="low",a.push({severity:"warning",category:"benchmarks",message:`AC ${n} is very low for CR ${e.cr}. Standard is ~${r.ac}. Creature will be crit often.`,expected:r.ac,actual:n})):t>4&&(g="high",a.push({severity:"warning",category:"benchmarks",message:`AC ${n} is very high for CR ${e.cr}. Standard is ~${r.ac}. Players may struggle to hit.`,expected:r.ac,actual:n}))}f==="high"&&g==="low"&&a.push({severity:"warning",category:"benchmarks",message:`HP ${c} is far above benchmark while AC ${n} is far below it. This indicates 5e-style drift (damage sponge / low defense). Consider lowering HP or raising AC to stay within PF1e CR ${e.cr} expectations.`,expected:{hp:r.hp,ac:r.ac},actual:{hp:c,ac:n}});const $=[{name:"Fort",val:e.fort_save_claimed},{name:"Ref",val:e.ref_save_claimed},{name:"Will",val:e.will_save_claimed}];for(const t of $)t.val!==void 0&&typeof t.val=="number"&&t.val<r.poorSave-2&&a.push({severity:"warning",category:"benchmarks",message:`${t.name} Save +${t.val} is very low for CR ${e.cr}. Standard is ~+${r.poorSave}. It will fail often.`,expected:r.poorSave,actual:t.val});try{const t=l||0;let s=0;if(e.racialHD&&e.racialHD>0){const i=v[e.type]?.babProgression||"medium";i==="fast"?s+=e.racialHD:i==="medium"?s+=Math.floor(e.racialHD*.75):s+=Math.floor(e.racialHD*.5)}for(const i of e.classLevels||[]){const d=v[i.className]&&v[i.className].babProgression||"medium";d==="fast"?s+=i.level||0:d==="medium"?s+=Math.floor((i.level||0)*.75):s+=Math.floor((i.level||0)*.5)}e.bab_claimed!==void 0&&e.bab_claimed!==s&&a.push({severity:"warning",category:"benchmarks",message:`BAB claimed +${e.bab_claimed} differs from recalculated BAB +${s} given type ${e.type} and ${t} HD.`,expected:s,actual:e.bab_claimed});const u=Math.floor(((e.str||10)-10)/2),p=(C[e.size]||{cmbCmdMod:0}).cmbCmdMod||0,o=s+u+p;e.cmb!==void 0&&e.cmb!==o&&a.push({severity:"warning",category:"benchmarks",message:`CMB ${e.cmb} differs from expected ${o} (BAB ${s} + Str ${u} + Size ${p}).`,expected:o,actual:e.cmb})}catch{}const h={Tiny:0,Small:0,Medium:0,Large:2,Huge:4,Gargantuan:6,Colossal:8}[e.size];return h!==void 0&&m<h&&a.push({severity:"warning",category:"benchmarks",message:`CR ${e.cr} is below minimum for ${e.size} size. ${e.size} creatures typically have CR ≥ ${h}.`,expected:h,actual:m}),{valid:!a.some(t=>t.severity==="critical"),messages:a,status:a.length>0?"WARN":"PASS"}}function S(e){if(e==null)return null;const a=typeof e=="number"?e.toString():String(e).trim();return y.find(m=>m.cr===a||m.cr===a.replace(/^CR\s+/i,""))??null}function D(e){const a=S(e);return!a||!a.hp?null:Math.max(1,Math.round(a.hp/4.5))}export{D as e,S as g,x as v};
