import{R as i}from"./iframe-DbLPxDSm.js";const b=({statBlock:e,validation:o})=>{const r=a=>{switch(a){case"PASS":return{backgroundColor:"#dcfce7",color:"#166534",borderColor:"#bbf7d0"};case"FAIL":return{backgroundColor:"#fee2e2",color:"#991b1b",borderColor:"#fecaca"};case"WARN":return{backgroundColor:"#fef9c3",color:"#854d0e",borderColor:"#fde047"};default:return{}}};return i.createElement("div",{style:{padding:"1.5rem",maxWidth:"42rem",margin:"0 auto",fontFamily:"sans-serif",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",backgroundColor:"white"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",borderBottom:"1px solid #e5e7eb",paddingBottom:"1rem",marginBottom:"1rem"}},i.createElement("div",null,i.createElement("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#111827",margin:0}},e.name),i.createElement("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:0}},e.size," ",e.type," â€¢ CR ",e.cr_text||e.cr)),i.createElement("span",{style:{padding:"0.25rem 1rem",borderRadius:"9999px",fontSize:"0.875rem",fontWeight:"bold",border:"1px solid",...r(o.status||"PASS")}},o.status)),i.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"}},o.messages.length===0?i.createElement("p",{style:{color:"#6b7280",fontStyle:"italic"}},"No validation errors found."):o.messages.map((a,t)=>i.createElement("div",{key:t,style:{padding:"0.75rem",borderRadius:"0.25rem",borderLeftWidth:"4px",borderLeftStyle:"solid",backgroundColor:a.severity==="error"?"#fef2f2":"#fefce8",borderLeftColor:a.severity==="error"?"#ef4444":"#eab308"}},i.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.createElement("span",{style:{fontFamily:"monospace",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",opacity:.75}},a.category)),i.createElement("p",{style:{marginTop:"0.25rem",fontWeight:500,color:"#1f2937"}},a.message),a.expected!==void 0&&i.createElement("div",{style:{fontSize:"0.75rem",marginTop:"0.25rem",color:"#6b7280"}},"Expected: ",JSON.stringify(a.expected)," | Actual: ",JSON.stringify(a.actual))))))};b.__docgenInfo={description:"",methods:[],displayName:"ValidatorDisplay",props:{statBlock:{required:!0,tsType:{name:"PF1eStatBlock"},description:""},validation:{required:!0,tsType:{name:"ValidationResult"},description:""}}};const f={Aberration:{babProgression:"medium",goodSaves:["Will"],skillRanksPerHD:4,hitDieType:8},Animal:{babProgression:"medium",goodSaves:["Fort","Ref"],skillRanksPerHD:2,hitDieType:8},Construct:{babProgression:"fast",goodSaves:[],skillRanksPerHD:2,hitDieType:10,noSkillsOrFeats:!0},Dragon:{babProgression:"fast",goodSaves:["Fort","Ref","Will"],skillRanksPerHD:6,hitDieType:12},Fey:{babProgression:"slow",goodSaves:["Ref","Will"],skillRanksPerHD:6,hitDieType:6},Humanoid:{babProgression:"medium",goodSaves:["Ref"],skillRanksPerHD:2,hitDieType:8},"Magical Beast":{babProgression:"fast",goodSaves:["Fort","Ref"],skillRanksPerHD:2,hitDieType:10},"Monstrous Humanoid":{babProgression:"fast",goodSaves:["Ref","Will"],skillRanksPerHD:4,hitDieType:10},Ooze:{babProgression:"medium",goodSaves:[],skillRanksPerHD:2,hitDieType:8,noSkillsOrFeats:!0},Outsider:{babProgression:"fast",goodSaves:["Ref","Will"],skillRanksPerHD:6,hitDieType:10},Plant:{babProgression:"medium",goodSaves:["Fort"],skillRanksPerHD:2,hitDieType:8},Undead:{babProgression:"medium",goodSaves:["Will"],skillRanksPerHD:4,hitDieType:8},Vermin:{babProgression:"medium",goodSaves:["Fort"],skillRanksPerHD:2,hitDieType:8,noSkillsOrFeats:!0}},D={Barbarian:{hitDieType:12,babProgression:"fast",goodSaves:["Fort"],skillRanksPerLevel:4,crMod:-1},Bard:{hitDieType:8,babProgression:"medium",goodSaves:["Ref","Will"],skillRanksPerLevel:6,crMod:-1},Cleric:{hitDieType:8,babProgression:"medium",goodSaves:["Fort","Will"],skillRanksPerLevel:2,crMod:-1},Druid:{hitDieType:8,babProgression:"medium",goodSaves:["Fort","Will"],skillRanksPerLevel:4,crMod:-1},Fighter:{hitDieType:10,babProgression:"fast",goodSaves:["Fort"],skillRanksPerLevel:2,crMod:-1},Monk:{hitDieType:8,babProgression:"medium",goodSaves:["Fort","Ref","Will"],skillRanksPerLevel:4,crMod:-1},Paladin:{hitDieType:10,babProgression:"fast",goodSaves:["Fort","Will"],skillRanksPerLevel:2,crMod:-1},Ranger:{hitDieType:10,babProgression:"fast",goodSaves:["Fort","Ref"],skillRanksPerLevel:6,crMod:-1},Rogue:{hitDieType:8,babProgression:"medium",goodSaves:["Ref"],skillRanksPerLevel:8,crMod:-1},Sorcerer:{hitDieType:6,babProgression:"slow",goodSaves:["Will"],skillRanksPerLevel:2,crMod:-1},Wizard:{hitDieType:6,babProgression:"slow",goodSaves:["Will"],skillRanksPerLevel:2,crMod:-1},Warrior:{hitDieType:10,babProgression:"fast",goodSaves:["Fort"],skillRanksPerLevel:2,crMod:-2},Expert:{hitDieType:8,babProgression:"medium",goodSaves:["Ref","Will"],skillRanksPerLevel:6,crMod:-2},Commoner:{hitDieType:6,babProgression:"slow",goodSaves:[],skillRanksPerLevel:2,crMod:-2},Adept:{hitDieType:6,babProgression:"slow",goodSaves:["Will"],skillRanksPerLevel:2,crMod:-2},Aristocrat:{hitDieType:8,babProgression:"medium",goodSaves:["Will"],skillRanksPerLevel:4,crMod:-2}},A={Fine:{acAttackMod:8,cmbCmdMod:-8,stealthMod:16},Diminutive:{acAttackMod:4,cmbCmdMod:-4,stealthMod:12},Tiny:{acAttackMod:2,cmbCmdMod:-2,stealthMod:8},Small:{acAttackMod:1,cmbCmdMod:-1,stealthMod:4},Medium:{acAttackMod:0,cmbCmdMod:0,stealthMod:0},Large:{acAttackMod:-1,cmbCmdMod:1,stealthMod:-4},Huge:{acAttackMod:-2,cmbCmdMod:2,stealthMod:-8},Gargantuan:{acAttackMod:-4,cmbCmdMod:4,stealthMod:-12},Colossal:{acAttackMod:-8,cmbCmdMod:8,stealthMod:-16}},v={basicNpc:{1:260,2:390,3:780,4:1650,5:2400,6:3450,7:4650,8:6e3,9:7800,10:10050,11:12750,12:16350,13:21e3,14:27e3,15:34800,16:45e3,17:58500,18:75e3,19:96e3,20:123e3},heroicNpc:{}},S={1:260,2:550,3:800,4:1150,5:1550,6:2e3,7:2600,8:3350,9:4250,10:5450,11:7e3,12:9e3,13:11600,14:15e3,15:19500,16:25e3,17:32e3,18:41e3,19:53e3,20:67e3},C=13,P=4;(function(){let o=0;for(let r=1;r<=20;r=r+1){const a=S[r];if(!a)continue;const t=a*C/P;o+=t,v.heroicNpc[r]=Math.round(o)}})();const T=[{cr:"1/8",hp:5,ac:10,highAttackBonus:-1,lowAttackBonus:-2,averageDamagePerRound:2,primaryAbilityDC:9,secondaryAbilityDC:6,goodSave:1,poorSave:-2},{cr:"1/6",hp:7,ac:10,highAttackBonus:0,lowAttackBonus:-1,averageDamagePerRound:3,primaryAbilityDC:10,secondaryAbilityDC:7,goodSave:2,poorSave:-1},{cr:"1/4",hp:8,ac:10,highAttackBonus:0,lowAttackBonus:-1,averageDamagePerRound:3,primaryAbilityDC:10,secondaryAbilityDC:7,goodSave:2,poorSave:-1},{cr:"1/3",hp:9,ac:10,highAttackBonus:0,lowAttackBonus:-1,averageDamagePerRound:3,primaryAbilityDC:10,secondaryAbilityDC:7,goodSave:2,poorSave:-1},{cr:"1/2",hp:10,ac:11,highAttackBonus:1,lowAttackBonus:0,averageDamagePerRound:4,primaryAbilityDC:11,secondaryAbilityDC:8,goodSave:3,poorSave:0},{cr:"1",hp:15,ac:12,highAttackBonus:2,lowAttackBonus:1,averageDamagePerRound:7,primaryAbilityDC:12,secondaryAbilityDC:9,goodSave:4,poorSave:1},{cr:"2",hp:20,ac:14,highAttackBonus:4,lowAttackBonus:3,averageDamagePerRound:10,primaryAbilityDC:13,secondaryAbilityDC:9,goodSave:5,poorSave:1},{cr:"3",hp:30,ac:15,highAttackBonus:6,lowAttackBonus:4,averageDamagePerRound:13,primaryAbilityDC:14,secondaryAbilityDC:10,goodSave:6,poorSave:2},{cr:"4",hp:40,ac:17,highAttackBonus:8,lowAttackBonus:6,averageDamagePerRound:16,primaryAbilityDC:15,secondaryAbilityDC:10,goodSave:7,poorSave:3},{cr:"5",hp:55,ac:18,highAttackBonus:10,lowAttackBonus:7,averageDamagePerRound:20,primaryAbilityDC:15,secondaryAbilityDC:11,goodSave:8,poorSave:4},{cr:"6",hp:70,ac:19,highAttackBonus:12,lowAttackBonus:8,averageDamagePerRound:25,primaryAbilityDC:16,secondaryAbilityDC:11,goodSave:9,poorSave:5},{cr:"7",hp:85,ac:20,highAttackBonus:13,lowAttackBonus:10,averageDamagePerRound:30,primaryAbilityDC:17,secondaryAbilityDC:12,goodSave:10,poorSave:6},{cr:"8",hp:100,ac:21,highAttackBonus:15,lowAttackBonus:11,averageDamagePerRound:35,primaryAbilityDC:18,secondaryAbilityDC:12,goodSave:11,poorSave:7},{cr:"9",hp:115,ac:23,highAttackBonus:17,lowAttackBonus:12,averageDamagePerRound:40,primaryAbilityDC:18,secondaryAbilityDC:13,goodSave:12,poorSave:8},{cr:"10",hp:130,ac:24,highAttackBonus:18,lowAttackBonus:13,averageDamagePerRound:45,primaryAbilityDC:19,secondaryAbilityDC:13,goodSave:13,poorSave:9},{cr:"11",hp:145,ac:25,highAttackBonus:19,lowAttackBonus:14,averageDamagePerRound:50,primaryAbilityDC:20,secondaryAbilityDC:14,goodSave:14,poorSave:10},{cr:"12",hp:160,ac:27,highAttackBonus:21,lowAttackBonus:15,averageDamagePerRound:55,primaryAbilityDC:21,secondaryAbilityDC:15,goodSave:15,poorSave:11},{cr:"13",hp:180,ac:28,highAttackBonus:22,lowAttackBonus:16,averageDamagePerRound:60,primaryAbilityDC:21,secondaryAbilityDC:15,goodSave:16,poorSave:12},{cr:"14",hp:200,ac:29,highAttackBonus:23,lowAttackBonus:17,averageDamagePerRound:65,primaryAbilityDC:22,secondaryAbilityDC:16,goodSave:17,poorSave:12},{cr:"15",hp:220,ac:30,highAttackBonus:24,lowAttackBonus:18,averageDamagePerRound:70,primaryAbilityDC:23,secondaryAbilityDC:16,goodSave:18,poorSave:13},{cr:"16",hp:240,ac:31,highAttackBonus:26,lowAttackBonus:19,averageDamagePerRound:80,primaryAbilityDC:24,secondaryAbilityDC:17,goodSave:19,poorSave:14},{cr:"17",hp:270,ac:32,highAttackBonus:27,lowAttackBonus:20,averageDamagePerRound:90,primaryAbilityDC:24,secondaryAbilityDC:18,goodSave:20,poorSave:15},{cr:"18",hp:300,ac:33,highAttackBonus:28,lowAttackBonus:21,averageDamagePerRound:100,primaryAbilityDC:25,secondaryAbilityDC:18,goodSave:20,poorSave:16},{cr:"19",hp:330,ac:34,highAttackBonus:29,lowAttackBonus:22,averageDamagePerRound:110,primaryAbilityDC:26,secondaryAbilityDC:19,goodSave:21,poorSave:16},{cr:"20",hp:370,ac:36,highAttackBonus:30,lowAttackBonus:23,averageDamagePerRound:120,primaryAbilityDC:27,secondaryAbilityDC:20,goodSave:22,poorSave:17},{cr:"21",hp:410,ac:37,highAttackBonus:31,lowAttackBonus:24,averageDamagePerRound:130,primaryAbilityDC:27,secondaryAbilityDC:20,goodSave:23,poorSave:18},{cr:"22",hp:450,ac:38,highAttackBonus:32,lowAttackBonus:25,averageDamagePerRound:140,primaryAbilityDC:28,secondaryAbilityDC:21,goodSave:24,poorSave:18},{cr:"23",hp:500,ac:39,highAttackBonus:34,lowAttackBonus:26,averageDamagePerRound:150,primaryAbilityDC:29,secondaryAbilityDC:22,goodSave:25,poorSave:19},{cr:"24",hp:550,ac:41,highAttackBonus:35,lowAttackBonus:27,averageDamagePerRound:160,primaryAbilityDC:29,secondaryAbilityDC:22,goodSave:26,poorSave:20},{cr:"25",hp:600,ac:42,highAttackBonus:36,lowAttackBonus:28,averageDamagePerRound:170,primaryAbilityDC:30,secondaryAbilityDC:23,goodSave:27,poorSave:20}],R={"1/8":50,"1/6":65,"1/4":100,"1/3":135,"1/2":200,1:400,2:600,3:800,4:1200,5:1600,6:2400,7:3200,8:4800,9:6400,10:9600,11:12800,12:19200,13:25600,14:38400,15:51200,16:76800,17:102400,18:153600,19:204800,20:307200,21:409600,22:614400,23:819200,24:1228800,25:1638400,26:2457600,27:3276800,28:4915200,29:6553600,30:9830400},k={"1/8":{slow:35,medium:50,fast:65},"1/6":{slow:45,medium:65,fast:80},"1/4":{slow:65,medium:85,fast:100},"1/3":{slow:90,medium:135,fast:170},"1/2":{slow:130,medium:190,fast:230},1:{slow:170,medium:260,fast:400},2:{slow:350,medium:550,fast:800},3:{slow:550,medium:800,fast:1200},4:{slow:750,medium:1150,fast:1700},5:{slow:1e3,medium:1550,fast:2300},6:{slow:1350,medium:2e3,fast:3e3},7:{slow:1750,medium:2600,fast:3900},8:{slow:2200,medium:3350,fast:5e3},9:{slow:2850,medium:4250,fast:6400},10:{slow:3650,medium:5450,fast:8200},11:{slow:4650,medium:7e3,fast:10500},12:{slow:6e3,medium:9e3,fast:13500},13:{slow:7750,medium:11600,fast:17500},14:{slow:1e4,medium:15e3,fast:22e3},15:{slow:13e3,medium:19500,fast:29e3},16:{slow:16500,medium:25e3,fast:38e3},17:{slow:22e3,medium:32e3,fast:48e3},18:{slow:28e3,medium:41e3,fast:62e3},19:{slow:35e3,medium:53e3,fast:79e3},20:{slow:45e3,medium:67e3,fast:1e5},21:{slow:58e3,medium:88e3,fast:13e4},22:{slow:75e3,medium:11e4,fast:17e4},23:{slow:98e3,medium:15e4,fast:22e4},24:{slow:13e4,medium:2e5,fast:29e4},25:{slow:17e4,medium:26e4,fast:38e4}};function x(e){const o=[];let r=e.racialHD||0,a=0;if(e.racialHD&&e.racialHD>0){const l=f[e.type];l?l.babProgression==="fast"?a+=e.racialHD:l.babProgression==="medium"?a+=Math.floor(e.racialHD*.75):a+=Math.floor(e.racialHD*.5):a+=Math.floor(e.racialHD*.75)}for(const l of e.classLevels||[]){const y=D[l.className];y&&(r+=l.level,y.babProgression==="fast"?a+=l.level:y.babProgression==="medium"?a+=Math.floor(l.level*.75):a+=Math.floor(l.level*.5))}const t=A[e.size]||{cmbCmdMod:0},c=Math.floor(((e.str||10)-10)/2),n=Math.floor(((e.dex||10)-10)/2);let m="MATCH";e.bab_claimed!==void 0&&e.bab_claimed!==a&&(m="MISMATCH",o.push({category:"basics",severity:"error",message:`Base Attack Bonus (BAB) +${e.bab_claimed} is invalid for ${r} HD. Expected +${a} (${e.type} progression).`,expected:a,actual:e.bab_claimed}));const s=10+a+c+n+t.cmbCmdMod,d=10+(e.bab_claimed||0)+c+n+t.cmbCmdMod;e.cmd_claimed&&(e.cmd_claimed===s||(e.cmd_claimed===d&&m==="MISMATCH"?o.push({category:"basics",severity:"warning",message:`CMD ${e.cmd_claimed} matches the source's (incorrect) BAB of +${e.bab_claimed}. If BAB were corrected to +${a}, CMD would be ${s}.`,expected:s,actual:e.cmd_claimed}):o.push({category:"basics",severity:"error",message:`Calculated CMD is ${s} (10 + Legal BAB ${a} + Str ${c} + Dex ${n} + Size ${t.cmbCmdMod}), but stat block claims ${e.cmd_claimed}.`,expected:s,actual:e.cmd_claimed})));const g=Math.ceil(r/2),p=e.feats?.length||0;p<g&&o.push({category:"basics",severity:"warning",message:`Creature has ${r} HD and should have at least ${g} feats, but only lists ${p}.`,expected:g,actual:p});const u=R[e.cr];return u&&e.xp!==u&&o.push({category:"basics",severity:"warning",message:`XP ${e.xp} does not match canonical value ${u} for CR ${e.cr}. (Source: Core Rulebook Experience Point Awards table)`,expected:u,actual:e.xp}),{valid:o.length===0,status:o.some(l=>l.severity==="error")?"FAIL":o.length>0?"WARN":"PASS",messages:o}}function L(e){const o=[];if(e.gearValue===void 0)return{valid:!0,messages:[{severity:"info",category:"economy",message:"No gear value provided; skipping economy validation."}]};const r=w(e),a=M(e,r);if(a===null)return o.push({severity:"warning",category:"economy",message:`Unable to determine expected wealth for ${r} tier.`}),{valid:!0,messages:o};const t=e.gearValue,n=(t-a)/a*100,m=15;Math.abs(n)<=m?o.push({severity:"info",category:"economy",message:`Wealth is on target for ${r} (${t} gp vs expected ${a} gp).`,expected:a,actual:t}):n>m?o.push({severity:"warning",category:"economy",message:`Over-geared: ${r} has ${t} gp, expected ~${a} gp (+${n.toFixed(1)}%).`,expected:a,actual:t}):o.push({severity:"warning",category:"economy",message:`Under-geared: ${r} has ${t} gp, expected ~${a} gp (${n.toFixed(1)}%).`,expected:a,actual:t});let s="PASS";return o.some(d=>d.severity==="error")?s="FAIL":o.some(d=>d.severity==="warning")&&(s="WARN"),{valid:Math.abs(n)<=m,messages:o,status:s}}function w(e){if(e.economicTier)return e.economicTier;const o=e.racialHD||0,r=e.classLevels||[],a=["Warrior","Expert","Commoner","Adept","Aristocrat"],c=r.filter(s=>!a.includes(s.className)).reduce((s,d)=>s+d.level,0),m=r.filter(s=>a.includes(s.className)).reduce((s,d)=>s+d.level,0);return c>=o&&c>0?"Heroic NPC":m>0?"Basic NPC":"Monster"}function M(e,o){if(o==="Heroic NPC"){const r=h(e);return r<1||r>20?null:v.heroicNpc[r]||null}if(o==="Basic NPC"){const r=h(e);return r<1||r>20?null:v.basicNpc[r]||null}if(o==="Monster"){const r=e.cr,a=k[r];if(!a)return null;let t=a.medium;return e.treasureType==="Double"?t*=2:e.treasureType==="Triple"?t*=3:e.treasureType==="Incidental"?t*=.5:e.treasureType==="None"&&(t=0),t}return null}function h(e){if(e.claimedEffectiveLevel!==void 0)return e.claimedEffectiveLevel;const o=e.racialHD||0,a=(e.classLevels||[]).reduce((t,c)=>t+c.level,0);return o+a}export{f as C,T as M,A as S,b as V,R as X,L as a,D as b,x as v};
