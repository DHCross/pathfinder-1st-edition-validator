import{R as n}from"./iframe-DrtcVVo2.js";import{W as p,T as v,v as f}from"./validateBasics-CetwHHmj.js";import"./preload-helper-PPVm8Dsz.js";const m=({statBlock:e,validation:t})=>{const s={PASS:"bg-green-100 text-green-800 border-green-200",FAIL:"bg-red-100 text-red-800 border-red-200",WARN:"bg-yellow-100 text-yellow-800 border-yellow-200"};return n.createElement("div",{className:"p-6 max-w-2xl mx-auto font-sans border rounded-lg shadow-sm bg-white"},n.createElement("div",{className:"flex justify-between items-start border-b pb-4 mb-4"},n.createElement("div",null,n.createElement("h2",{className:"text-2xl font-bold text-gray-900"},e.name),n.createElement("p",{className:"text-sm text-gray-500"},e.size," ",e.creature_type," â€¢ CR ",e.cr_text||e.cr)),n.createElement("span",{className:`px-4 py-1 rounded-full text-sm font-bold border ${s[t.status]}`},t.status)),n.createElement("div",{className:"space-y-3"},t.messages.length===0?n.createElement("p",{className:"text-gray-500 italic"},"No validation errors found."):t.messages.map((a,r)=>n.createElement("div",{key:r,className:`p-3 rounded border-l-4 ${a.severity==="error"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`},n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"font-mono text-xs uppercase tracking-wider opacity-75"},a.rule_id),n.createElement("span",{className:"text-xs text-gray-500"},a.reference_doc)),n.createElement("p",{className:"mt-1 font-medium text-gray-800"},a.text)))))};m.__docgenInfo={description:"",methods:[],displayName:"ValidatorDisplay",props:{statBlock:{required:!0,tsType:{name:"PF1eStatBlock"},description:""},validation:{required:!0,tsType:{name:"ValidationResult"},description:""}}};function y(e){const t=[];if(e.gearValue===void 0)return{valid:!0,messages:[{severity:"info",category:"economy",message:"No gear value provided; skipping economy validation."}]};const s=x(e),a=b(e,s);if(a===null)return t.push({severity:"warning",category:"economy",message:`Unable to determine expected wealth for ${s} tier.`}),{valid:!0,messages:t};const r=e.gearValue,l=(r-a)/a*100,d=15;Math.abs(l)<=d?t.push({severity:"info",category:"economy",message:`Wealth is on target for ${s} (${r} gp vs expected ${a} gp).`,expected:a,actual:r}):l>d?t.push({severity:"warning",category:"economy",message:`Over-geared: ${s} has ${r} gp, expected ~${a} gp (+${l.toFixed(1)}%).`,expected:a,actual:r}):t.push({severity:"warning",category:"economy",message:`Under-geared: ${s} has ${r} gp, expected ~${a} gp (${l.toFixed(1)}%).`,expected:a,actual:r});let o="PASS";return t.some(c=>c.severity==="error")?o="FAIL":t.some(c=>c.severity==="warning")&&(o="WARN"),{valid:Math.abs(l)<=d,messages:t,status:o}}function x(e){if(e.economicTier)return e.economicTier;const t=e.racialHD||0,s=e.classLevels||[],a=["Warrior","Expert","Commoner","Adept","Aristocrat"],i=s.filter(o=>!a.includes(o.className)).reduce((o,c)=>o+c.level,0),d=s.filter(o=>a.includes(o.className)).reduce((o,c)=>o+c.level,0);return i>=t&&i>0?"Heroic NPC":d>0?"Basic NPC":"Monster"}function b(e,t){if(t==="Heroic NPC"){const s=g(e);return s<1||s>20?null:p.heroicNpc[s]||null}if(t==="Basic NPC"){const s=g(e);return s<1||s>20?null:p.basicNpc[s]||null}if(t==="Monster"){const s=e.cr,a=v[s];if(!a)return null;let r=a.medium;return e.treasureType==="Double"?r*=2:e.treasureType==="Triple"?r*=3:e.treasureType==="Incidental"?r*=.5:e.treasureType==="None"&&(r=0),r}return null}function g(e){if(e.claimedEffectiveLevel!==void 0)return e.claimedEffectiveLevel;const t=e.racialHD||0,a=(e.classLevels||[]).reduce((r,i)=>r+i.level,0);return t+a}const A={title:"Pathfinder/Validator",component:m},N={name:"Rich Rookie",creature_type:"Humanoid",size:"Medium",cr:1,xp:400,total_wealth_gp:5e3,class_levels:[{class_name:"Fighter",level_count:1}],racial_hd_count:0,treasure_code:"NPC gear",ability_scores:{str:14,dex:12,con:14,int:10,wis:10,cha:8},feats:["Power Attack","Cleave","Weapon Focus (Longsword)"]},u={render:e=>{const t=f(e.statBlock),s=y(e.statBlock),a={status:t.status==="FAIL"||s.status==="FAIL"?"FAIL":t.status==="WARN"||s.status==="WARN"?"WARN":"PASS",messages:[...t.messages,...s.messages]};return n.createElement(m,{statBlock:e.statBlock,validation:a})},args:{statBlock:N,validation:{status:"PASS",messages:[]}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  render: args => {
    const basics = validateBasics(args.statBlock);
    const economy = validateEconomy(args.statBlock);
    const combinedResult = {
      status: basics.status === 'FAIL' || economy.status === 'FAIL' ? 'FAIL' : basics.status === 'WARN' || economy.status === 'WARN' ? 'WARN' : 'PASS',
      messages: [...basics.messages, ...economy.messages]
    };
    return <ValidatorDisplay statBlock={args.statBlock} validation={combinedResult} />;
  },
  args: {
    statBlock: OvergearedFighter,
    validation: {
      status: 'PASS',
      messages: []
    }
  }
}`,...u.parameters?.docs?.source}}};const _=["Full_Validation_Check"];export{u as Full_Validation_Check,_ as __namedExportsOrder,A as default};
